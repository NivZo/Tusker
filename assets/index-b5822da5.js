var Ge=Object.defineProperty;var Ze=(t,e,n)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>(Ze(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function A(){}function Qe(t,e){for(const n in e)t[n]=e[n];return t}function Ue(t){return t()}function Te(){return Object.create(null)}function D(t){t.forEach(Ue)}function ae(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xe(t){return Object.keys(t).length===0}function Xe(t,...e){if(t==null){for(const s of e)s(void 0);return A}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ee(t,e,n){t.$$.on_destroy.push(Xe(e,n))}function he(t,e,n,s){if(t){const l=He(t,e,n,s);return t[0](l)}}function He(t,e,n,s){return t[1]&&s?Qe(n.ctx.slice(),t[1](s(e))):n.ctx}function me(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const i=[],o=Math.max(e.dirty.length,l.length);for(let u=0;u<o;u+=1)i[u]=e.dirty[u]|l[u];return i}return e.dirty|l}return e.dirty}function ge(t,e,n,s,l,i){if(l){const o=He(e,n,s,i);t.p(o,l)}}function _e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function et(t){return t&&ae(t.destroy)?t.destroy:A}const tt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function h(t,e){t.appendChild(e)}function O(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function ke(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function W(t){return document.createTextNode(t)}function S(){return W(" ")}function le(){return W("")}function M(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function ze(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nt(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ie(t,e){t.value=e??""}function re(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function X(t,e,n){t.classList.toggle(e,!!n)}let be;function se(t){be=t}function st(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const x=[],ue=[];let te=[];const Pe=[],lt=Promise.resolve();let de=!1;function it(){de||(de=!0,lt.then(Ye))}function pe(t){te.push(t)}const fe=new Set;let Z=0;function Ye(){if(Z!==0)return;const t=be;do{try{for(;Z<x.length;){const e=x[Z];Z++,se(e),rt(e.$$)}}catch(e){throw x.length=0,Z=0,e}for(se(null),x.length=0,Z=0;ue.length;)ue.pop()();for(let e=0;e<te.length;e+=1){const n=te[e];fe.has(n)||(fe.add(n),n())}te.length=0}while(x.length);for(;Pe.length;)Pe.pop()();de=!1,fe.clear(),se(t)}function rt(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pe)}}function ot(t){const e=[],n=[];te.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),te=e}const oe=new Set;let V;function z(){V={r:0,c:[],p:V}}function Y(){V.r||D(V.c),V=V.p}function _(t,e){t&&t.i&&(oe.delete(t),t.i(e))}function $(t,e,n,s){if(t&&t.o){if(oe.has(t))return;oe.add(t),V.c.push(()=>{oe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function J(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ut(t,e){$(t,1,1,()=>{e.delete(t.key)})}function at(t,e,n,s,l,i,o,u,r,a,c,d){let p=t.length,f=i.length,m=p;const w={};for(;m--;)w[t[m].key]=m;const v=[],T=new Map,y=new Map,E=[];for(m=f;m--;){const b=d(l,i,m),I=n(b);let L=o.get(I);L?s&&E.push(()=>L.p(b,e)):(L=a(I,b),L.c()),T.set(I,v[m]=L),I in w&&y.set(I,Math.abs(m-w[I]))}const j=new Set,U=new Set;function G(b){_(b,1),b.m(u,c),o.set(b.key,b),c=b.first,f--}for(;p&&f;){const b=v[f-1],I=t[p-1],L=b.key,ie=I.key;b===I?(c=b.first,p--,f--):T.has(ie)?!o.has(L)||j.has(L)?G(b):U.has(ie)?p--:y.get(L)>y.get(ie)?(U.add(L),G(b)):(j.add(ie),p--):(r(I,o),p--)}for(;p--;){const b=t[p];T.has(b.key)||r(b,o)}for(;f;)G(v[f-1]);return D(E),v}function B(t){t&&t.c()}function F(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),pe(()=>{const i=t.$$.on_mount.map(Ue).filter(ae);t.$$.on_destroy?t.$$.on_destroy.push(...i):D(i),t.$$.on_mount=[]}),l.forEach(pe)}function N(t,e){const n=t.$$;n.fragment!==null&&(ot(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){t.$$.dirty[0]===-1&&(x.push(t),it(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,s,l,i,o,u=[-1]){const r=be;se(t);const a=t.$$={fragment:null,ctx:[],props:i,update:A,not_equal:l,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Te(),dirty:u,skip_bound:!1,root:e.target||r.$$.root};o&&o(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(d,p,...f)=>{const m=f.length?f[0]:p;return a.ctx&&l(a.ctx[d],a.ctx[d]=m)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](m),c&&ct(t,d)),p}):[],a.update(),c=!0,D(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const d=nt(e.target);a.fragment&&a.fragment.l(d),d.forEach(P)}else a.fragment&&a.fragment.c();e.intro&&_(t.$$.fragment),F(t,e.target,e.anchor),Ye()}se(r)}class q{constructor(){ce(this,"$$");ce(this,"$$set")}$destroy(){N(this,1),this.$destroy=A}$on(e,n){if(!ae(n))return A;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ft);function dt(t){let e,n,s,l,i;const o=t[1].default,u=he(o,t,t[0],null);return{c(){e=k("div"),n=k("main"),u&&u.c(),g(e,"class","app"),g(e,"role","application")},m(r,a){O(r,e,a),h(e,n),u&&u.m(n,null),s=!0,l||(i=M(e,"contextmenu",ze(t[2])),l=!0)},p(r,a){u&&u.p&&(!s||a&1)&&ge(u,o,r,r[0],s?me(o,r[0],a,null):_e(r[0]),null)},i(r){s||(_(u,r),s=!0)},o(r){$(u,r),s=!1},d(r){r&&P(e),u&&u.d(r),l=!1,i()}}}function pt(t){let e,n,s;const l=t[1].default,i=he(l,t,t[0],null);return{c(){e=k("div"),n=k("main"),i&&i.c(),g(e,"class","app"),g(e,"role","application")},m(o,u){O(o,e,u),h(e,n),i&&i.m(n,null),s=!0},p(o,u){i&&i.p&&(!s||u&1)&&ge(i,l,o,o[0],s?me(l,o[0],u,null):_e(o[0]),null)},i(o){s||(_(i,o),s=!0)},o(o){$(i,o),s=!1},d(o){o&&P(e),i&&i.d(o)}}}function ht(t){let e,n,s,l;const i=[pt,dt],o=[];function u(r,a){return 0}return e=u(),n=o[e]=i[e](t),{c(){n.c(),s=le()},m(r,a){o[e].m(r,a),O(r,s,a),l=!0},p(r,[a]){n.p(r,a)},i(r){l||(_(n),l=!0)},o(r){$(n),l=!1},d(r){r&&P(s),o[e].d(r)}}}function mt(t,e,n){let{$$slots:s={},$$scope:l}=e;function i(o){st.call(this,t,o)}return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,s,i]}class gt extends q{constructor(e){super(),R(this,e,mt,ht,K,{})}}const _t="/Tusker/assets/tusker-logo-poly-5836d0cb.png";function kt(t){let e;return{c(){e=k("span"),e.innerHTML=`<img id="logo-img" src="${_t}" alt="Tusker Logo"/> <div><h1>Tusker</h1></div>`,g(e,"id","logo-container")},m(n,s){O(n,e,s)},p:A,i:A,o:A,d(n){n&&P(e)}}}class bt extends q{constructor(e){super(),R(this,e,null,kt,K,{})}}const Q=[];function $t(t,e){return{subscribe:$e(t,e).subscribe}}function $e(t,e=A){let n;const s=new Set;function l(u){if(K(t,u)&&(t=u,n)){const r=!Q.length;for(const a of s)a[1](),Q.push(a,t);if(r){for(let a=0;a<Q.length;a+=2)Q[a][0](Q[a+1]);Q.length=0}}}function i(u){l(u(t))}function o(u,r=A){const a=[u,r];return s.add(a),s.size===1&&(n=e(l,i)||A),u(t),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:o}}function ye(t,e,n){const s=!Array.isArray(t),l=s?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return $t(n,(o,u)=>{let r=!1;const a=[];let c=0,d=A;const p=()=>{if(c)return;d();const m=e(s?a[0]:a,o,u);i?o(m):d=ae(m)?m:A},f=l.map((m,w)=>Xe(m,v=>{a[w]=v,c&=~(1<<w),r&&p()},()=>{c|=1<<w}));return r=!0,p(),function(){D(f),d(),r=!1}})}const yt=(t,e)=>{const n=window.localStorage.getItem(t);return n?JSON.parse(n):e},wt=(t,e)=>{e(n=>{window.localStorage.setItem(t,JSON.stringify(n))})},Tt=(t,e)=>{const n=yt(t,e),{subscribe:s,set:l,update:i}=$e(n);return wt(t,s),{subscribe:s,set:l,update:i}},It="tusker/tasks",Pt=()=>{const{subscribe:t,set:e,update:n}=Tt(It,[]);let s=u=>u.length?Math.max(...u.map(r=>r.id))+1:0,l=(u,r)=>u.filter(a=>a.id==r)[0],i=u=>n(r=>[...r,{id:s(r),...u}]),o=(u,r)=>n(a=>a.map(c=>(c.id==u&&(c={id:u,...r(l(a,u))}),c)));return{subscribe:t,set:e,updateTask:o,toggleTaskState:(u,r)=>o(u,a=>({...a,state:r??(a.state=="Finished"?"In-Progress":"Finished")})),addTask:i,addTasks:u=>{u.forEach(i)},addTaskByTitle:u=>i({title:u,state:"In-Progress",tags:[]}),deleteTask:u=>n(r=>r.filter(a=>a.id!=u)),deleteTasks:()=>e([]),deleteFinishedTasks:()=>n(u=>u.filter(r=>r.state!="Finished"))}},C=Pt(),vt=ye(C,t=>t.filter(e=>e.state!="Finished")),Ot=ye(C,t=>t.filter(e=>e.state=="Finished"));let St="https://api.ai21.com/studio/v1/j2-ultra/complete",Lt="OA6FRXUU6lln8U1jKldXZ2jtcyaplKl0",Mt=`Your mission is to accept a task descriptions and break it down into smaller task units.
Answer with markdown and write each task in a new line.
If a task unit includes multiple logical steps or elements, break it down to separate task units.
Pay close attention to details such as targets, dates, and requirements.
Each task unit must begin with an asterisk, and then the task unit's description.
Your input is between <input-start> and <input-end>.`,Je=async t=>{let e=new Headers;e.set("Content-Type","application/json"),e.set("Authorization",`Bearer ${Lt}`);let n=JSON.stringify({prompt:`${Mt}
<input-start>${t}<input-end>`,numResults:1,epoch:0,maxTokens:400,temperature:0,topKReturn:0,topP:1,presencePenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},countPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},frequencyPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},stopSequences:[]}),s=new Request(St,{method:"POST",headers:e,body:n}),l=await(await fetch(s)).json();return Ct(l.completions[0].data.text)},Ct=t=>t.split(`
`).map(At).filter(e=>!!e.trim()).map(e=>({title:e,state:"In-Progress",tags:[]})),At=t=>t.startsWith("* ")?t.replace("* ",""):t;function ve(t){let e,n=t[0]?"[SMART]":"[MANUAL]",s;return{c(){e=k("span"),s=W(n),g(e,"class","task-input-mode")},m(l,i){O(l,e,i),h(e,s)},p(l,i){i&1&&n!==(n=l[0]?"[SMART]":"[MANUAL]")&&H(s,n)},d(l){l&&P(e)}}}function Et(t){let e,n,s,l,i,o,u,r,a=t[1]&&ve(t);return{c(){e=k("div"),n=k("button"),s=k("span"),s.innerHTML='<input type="checkbox" disabled=""/>',l=S(),i=k("input"),o=S(),a&&a.c(),g(s,"class","task-item-checkbox"),g(i,"type","text"),g(i,"placeholder",t[5]),i.disabled=t[4],g(i,"class","manual-task-input-textbox"),g(n,"class","task-item"),X(n,"isFocus",t[1]),X(n,"isLoading",t[4]),g(e,"class","new-task-input")},m(c,d){O(c,e,d),h(e,n),h(n,s),h(n,l),h(n,i),Ie(i,t[3]),t[8](i),h(n,o),a&&a.m(n,null),u||(r=[M(i,"input",t[7]),M(i,"focus",t[9]),M(i,"blur",t[10]),M(n,"click",t[11]),M(n,"keydown",t[6])],u=!0)},p(c,[d]){d&32&&g(i,"placeholder",c[5]),d&16&&(i.disabled=c[4]),d&8&&i.value!==c[3]&&Ie(i,c[3]),c[1]?a?a.p(c,d):(a=ve(c),a.c(),a.m(n,null)):a&&(a.d(1),a=null),d&2&&X(n,"isFocus",c[1]),d&16&&X(n,"isLoading",c[4])},i:A,o:A,d(c){c&&P(e),t[8](null),a&&a.d(),u=!1,D(r)}}}function Ft(t,e,n){let s,l,i,o=!1,u=!1,r=!1,a=async T=>{T.key=="Enter"&&i.trim()&&(o?(n(4,r=!0),(await Je(i)).forEach(C.addTask),n(4,r=!1)):C.addTaskByTitle(i),n(3,i=""))},c=T=>{T.ctrlKey&&T.altKey&&(T.preventDefault(),n(0,o=!o))},d=T=>{c(T),a(T)};function p(){i=this.value,n(3,i)}function f(T){ue[T?"unshift":"push"](()=>{l=T,n(2,l)})}const m=()=>n(1,u=!0),w=()=>n(1,u=!1),v=()=>l.focus();return t.$$.update=()=>{t.$$.dirty&3&&n(5,s=(o?"Describe your tasks":"Add a task		")+(u?"	(Press Ctrl+Alt to toggle input mode)":""))},[o,u,l,i,r,s,d,p,f,m,w,v]}class Nt extends q{constructor(e){super(),R(this,e,Ft,Et,K,{})}}const jt=()=>{const{subscribe:t,set:e,update:n}=$e({sidePane:{isOpen:!1,selectedTaskId:null},contextMenu:{isOpen:!1}});return{subscribe:t,toggleSidePane:s=>n(l=>s!=null&&s!=l.sidePane.selectedTaskId?{...l,sidePane:{isOpen:!0,selectedTaskId:s}}:{...l,sidePane:{isOpen:!1,selectedTaskId:null}}),toggleContextMenu:()=>n(s=>({...s,contextMenu:{isOpen:!s.contextMenu.isOpen}})),updateContextMenu:s=>n(l=>({...l,contextMenu:{isOpen:s}}))}},ne=jt();ye(ne,t=>t.sidePane.isOpen);const{window:Oe}=tt;function Se(t,e,n){const s=t.slice();return s[15]=e[n],s}function Le(t){let e,n,s,l,i,o=J(t[0]),u=[];for(let r=0;r<o.length;r+=1)u[r]=Me(Se(t,o,r));return{c(){e=k("nav"),n=k("div"),s=k("ul");for(let r=0;r<u.length;r+=1)u[r].c();g(n,"class","navbar"),g(n,"id","navbar"),re(e,"top",t[3].y+"px"),re(e,"left",t[3].x+"px")},m(r,a){O(r,e,a),h(e,n),h(n,s);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(s,null);l||(i=et(t[7].call(null,e)),l=!0)},p(r,a){if(a&65){o=J(r[0]);let c;for(c=0;c<o.length;c+=1){const d=Se(r,o,c);u[c]?u[c].p(d,a):(u[c]=Me(d),u[c].c(),u[c].m(s,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=o.length}a&8&&re(e,"top",r[3].y+"px"),a&8&&re(e,"left",r[3].x+"px")},d(r){r&&P(e),ke(u,r),l=!1,i()}}}function Me(t){let e,n,s,l=(t[15].icon?t[15].icon:"")+"",i,o,u,r=t[15].displayText+"",a,c,d,p;function f(...m){return t[10](t[15],...m)}return{c(){e=k("li"),n=k("button"),s=k("span"),i=W(l),o=S(),u=k("span"),a=W(r),c=S(),g(s,"class","context-menu-li-icon"),g(u,"class","context-menu-li-text")},m(m,w){O(m,e,w),h(e,n),h(n,s),h(s,i),h(n,o),h(n,u),h(u,a),h(n,c),d||(p=M(n,"click",f),d=!0)},p(m,w){t=m,w&1&&l!==(l=(t[15].icon?t[15].icon:"")+"")&&H(i,l),w&1&&r!==(r=t[15].displayText+"")&&H(a,r)},d(m){m&&P(e),d=!1,p()}}}function Bt(t){let e,n,s,l,i,o=t[1]&&Le(t);const u=t[9].default,r=he(u,t,t[8],null);return{c(){o&&o.c(),e=S(),n=k("span"),r&&r.c(),g(n,"role","superscript")},m(a,c){o&&o.m(a,c),O(a,e,c),O(a,n,c),r&&r.m(n,null),t[11](n),s=!0,l||(i=[M(Oe,"click",t[6]),M(Oe,"contextmenu",t[5]),M(n,"contextmenu",ze(t[4]))],l=!0)},p(a,[c]){a[1]?o?o.p(a,c):(o=Le(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),r&&r.p&&(!s||c&256)&&ge(r,u,a,a[8],s?me(u,a[8],c,null):_e(a[8]),null)},i(a){s||(_(r,a),s=!0)},o(a){$(r,a),s=!1},d(a){a&&(P(e),P(n)),o&&o.d(a),r&&r.d(a),t[11](null),l=!1,D(i)}}}function Wt(t,e,n){let{$$slots:s={},$$scope:l}=e,{menuItems:i=[]}=e,o,u={x:0,y:0},r={h:0,w:0},a={h:0,w:0},c=!1,d=y=>{n(1,c=!0),a={w:window.innerWidth,h:window.innerHeight},n(3,u={x:y.clientX+document.documentElement.scrollLeft,y:y.clientY+document.documentElement.scrollTop}),console.log(`x: ${y.clientX}, y: ${y.clientY}`),a.h-u.y<r.h&&n(3,u.y=u.y-r.h,u),a.w-u.x<r.w&&n(3,u.x=u.x-r.w,u)},p=y=>{var E,j;return o.children[0]==y?!0:(j=(E=o.children[0])==null?void 0:E.children)!=null&&j.length?[...o.children[0].children].some(U=>U==y):!1},f=y=>{var E;((E=o==null?void 0:o.children)==null?void 0:E.length)==1?n(1,c=p(y.target)):n(1,c=!1)},m=()=>{n(1,c=!1)},w=y=>{r={h:y.offsetHeight,w:y.offsetWidth}};const v=(y,E)=>{y.onClick(),E.stopPropagation(),m()};function T(y){ue[y?"unshift":"push"](()=>{o=y,n(2,o)})}return t.$$set=y=>{"menuItems"in y&&n(0,i=y.menuItems),"$$scope"in y&&n(8,l=y.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&ne.updateContextMenu(c)},[i,c,o,u,d,f,m,w,l,s,v,T]}class we extends q{constructor(e){super(),R(this,e,Wt,Bt,K,{menuItems:0})}}function Dt(t){let e,n;return{c(){e=k("div"),n=W(t[0]),g(e,"class","task-item-tag")},m(s,l){O(s,e,l),h(e,n)},p(s,l){l&1&&H(n,s[0])},d(s){s&&P(e)}}}function Kt(t){let e,n;return e=new we({props:{menuItems:t[1],$$slots:{default:[Dt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,[l]){const i={};l&9&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Rt(t,e,n){let{value:s}=e,{taskId:l}=e,i=[{name:"deleteTag",onClick:()=>C.updateTask(l,o=>({...o,tags:o.tags.filter(u=>u!=s)})),displayText:"Delete tag",icon:"X",states:["In-Progress","Finished"]}];return t.$$set=o=>{"value"in o&&n(0,s=o.value),"taskId"in o&&n(2,l=o.taskId)},[s,i,l]}class Ve extends q{constructor(e){super(),R(this,e,Rt,Kt,K,{value:0,taskId:2})}}function Ce(t,e,n){const s=t.slice();return s[8]=e[n],s}function Ae(t){let e,n,s=J(t[0].tags),l=[];for(let o=0;o<s.length;o+=1)l[o]=Ee(Ce(t,s,o));const i=o=>$(l[o],1,1,()=>{l[o]=null});return{c(){e=k("span");for(let o=0;o<l.length;o+=1)l[o].c();g(e,"class","task-item-tags")},m(o,u){O(o,e,u);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);n=!0},p(o,u){if(u&1){s=J(o[0].tags);let r;for(r=0;r<s.length;r+=1){const a=Ce(o,s,r);l[r]?(l[r].p(a,u),_(l[r],1)):(l[r]=Ee(a),l[r].c(),_(l[r],1),l[r].m(e,null))}for(z(),r=s.length;r<l.length;r+=1)i(r);Y()}},i(o){if(!n){for(let u=0;u<s.length;u+=1)_(l[u]);n=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)$(l[u]);n=!1},d(o){o&&P(e),ke(l,o)}}}function Ee(t){let e,n;return e=new Ve({props:{taskId:t[0].id,value:t[8]}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const i={};l&1&&(i.taskId=s[0].id),l&1&&(i.value=s[8]),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function qt(t){let e,n,s,l,i,o=t[0].title+"",u,r,a,c,d,p=!t[2].sidePane.isOpen&&Ae(t);return{c(){e=k("button"),n=k("span"),s=k("input"),l=S(),i=k("span"),u=W(o),r=S(),p&&p.c(),g(s,"type","checkbox"),g(n,"class","task-item-checkbox"),g(i,"class","task-item-title"),g(e,"class","task-item"),X(e,"isFinished",t[1])},m(f,m){O(f,e,m),h(e,n),h(n,s),s.checked=t[1],h(e,l),h(e,i),h(i,u),h(e,r),p&&p.m(e,null),a=!0,c||(d=[M(s,"change",t[4]),M(s,"click",t[5]),M(e,"click",t[6])],c=!0)},p(f,m){m&2&&(s.checked=f[1]),(!a||m&1)&&o!==(o=f[0].title+"")&&H(u,o),f[2].sidePane.isOpen?p&&(z(),$(p,1,1,()=>{p=null}),Y()):p?(p.p(f,m),m&4&&_(p,1)):(p=Ae(f),p.c(),_(p,1),p.m(e,null)),(!a||m&2)&&X(e,"isFinished",f[1])},i(f){a||(_(p),a=!0)},o(f){$(p),a=!1},d(f){f&&P(e),p&&p.d(),c=!1,D(d)}}}function Ut(t){let e,n;return e=new we({props:{menuItems:t[3].filter(t[7]),$$slots:{default:[qt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,[l]){const i={};l&1&&(i.menuItems=s[3].filter(s[7])),l&2055&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Xt(t,e,n){let s,l;ee(t,ne,d=>n(2,l=d));let{task:i}=e,o=[{name:"toggleTask",onClick:()=>C.toggleTaskState(i.id,"In-Progress"),displayText:"Mark as not finished",icon:"⍻",states:["Finished"]},{name:"toggleTask",onClick:()=>C.toggleTaskState(i.id,"Finished"),displayText:"Mark as finished",icon:"✓",states:["In-Progress"]},{name:"breakdownTask",onClick:async()=>{(await Je(i.title)).forEach(C.addTask),C.deleteTask(i.id)},displayText:"Breakdown",icon:"☄",states:["In-Progress"]},{name:"deleteTask",onClick:()=>C.deleteTask(i.id),displayText:"Delete task",icon:"X",states:["In-Progress","Finished"]}];function u(){s=this.checked,n(1,s),n(0,i)}const r=()=>C.toggleTaskState(i.id),a=()=>ne.toggleSidePane(i.id),c=d=>d.states.includes(i.state);return t.$$set=d=>{"task"in d&&n(0,i=d.task)},t.$$.update=()=>{t.$$.dirty&1&&n(1,s=i.state=="Finished")},[i,s,l,o,u,r,a,c]}class Ht extends q{constructor(e){super(),R(this,e,Xt,Ut,K,{task:0})}}function Fe(t,e,n){const s=t.slice();return s[5]=e[n],s}function Ne(t){let e,n;return e=new we({props:{menuItems:t[3],$$slots:{default:[zt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const i={};l&263&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function zt(t){let e,n,s,l,i,o,u=t[0].length+"",r,a,c,d;return{c(){e=k("button"),n=k("span"),n.textContent="▶",s=S(),l=k("span"),i=W(t[1]),o=W(" ("),r=W(u),a=W(")"),g(n,"class","task-list-button-triangle"),X(n,"showTasks",t[2]),g(l,"class","task-list-button-text"),g(e,"class","task-list-button")},m(p,f){O(p,e,f),h(e,n),h(e,s),h(e,l),h(l,i),h(l,o),h(l,r),h(l,a),c||(d=M(e,"click",t[4]),c=!0)},p(p,f){f&4&&X(n,"showTasks",p[2]),f&2&&H(i,p[1]),f&1&&u!==(u=p[0].length+"")&&H(r,u)},d(p){p&&P(e),c=!1,d()}}}function je(t){let e=[],n=new Map,s,l,i=J(t[0]);const o=u=>u[5].id;for(let u=0;u<i.length;u+=1){let r=Fe(t,i,u),a=o(r);n.set(a,e[u]=Be(a,r))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=le()},m(u,r){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(u,r);O(u,s,r),l=!0},p(u,r){r&1&&(i=J(u[0]),z(),e=at(e,r,o,1,u,i,n,s.parentNode,ut,Be,s,Fe),Y())},i(u){if(!l){for(let r=0;r<i.length;r+=1)_(e[r]);l=!0}},o(u){for(let r=0;r<e.length;r+=1)$(e[r]);l=!1},d(u){u&&P(s);for(let r=0;r<e.length;r+=1)e[r].d(u)}}}function Be(t,e){let n,s,l;return s=new Ht({props:{task:e[5]}}),{key:t,first:null,c(){n=le(),B(s.$$.fragment),this.first=n},m(i,o){O(i,n,o),F(s,i,o),l=!0},p(i,o){e=i;const u={};o&1&&(u.task=e[5]),s.$set(u)},i(i){l||(_(s.$$.fragment,i),l=!0)},o(i){$(s.$$.fragment,i),l=!1},d(i){i&&P(n),N(s,i)}}}function Yt(t){let e,n,s,l=!!t[1]&&t[0].length&&Ne(t),i=t[2]&&je(t);return{c(){e=k("div"),l&&l.c(),n=S(),i&&i.c(),g(e,"class","task-list")},m(o,u){O(o,e,u),l&&l.m(e,null),h(e,n),i&&i.m(e,null),s=!0},p(o,[u]){o[1]&&o[0].length?l?(l.p(o,u),u&3&&_(l,1)):(l=Ne(o),l.c(),_(l,1),l.m(e,n)):l&&(z(),$(l,1,1,()=>{l=null}),Y()),o[2]?i?(i.p(o,u),u&4&&_(i,1)):(i=je(o),i.c(),_(i,1),i.m(e,null)):i&&(z(),$(i,1,1,()=>{i=null}),Y())},i(o){s||(_(l),_(i),s=!0)},o(o){$(l),$(i),s=!1},d(o){o&&P(e),l&&l.d(),i&&i.d()}}}function Jt(t,e,n){let{taskList:s}=e,{category:l=void 0}=e,i=!0;const o=[{name:"deleteAll",displayText:"Delete tasks",onClick:()=>s.forEach(r=>C.deleteTask(r.id)),icon:"X"}],u=()=>n(2,i=!i);return t.$$set=r=>{"taskList"in r&&n(0,s=r.taskList),"category"in r&&n(1,l=r.category)},[s,l,i,o,u]}class We extends q{constructor(e){super(),R(this,e,Jt,Yt,K,{taskList:0,category:1})}}function De(t,e,n){const s=t.slice();return s[5]=e[n],s}function Ke(t){let e,n,s,l=t[1].title+"",i,o,u,r,a,c,d,p,f,m,w,v,T,y,E,j,U,G,b=t[1].tags.length>=0&&Re(t);return{c(){e=k("div"),n=k("div"),s=k("span"),i=W(l),o=S(),u=k("hr"),r=S(),a=k("span"),b&&b.c(),c=S(),d=k("input"),p=S(),f=k("hr"),m=S(),w=k("span"),v=k("input"),y=S(),E=k("hr"),g(s,"id","side-panel-title"),g(d,"type","text"),g(d,"placeholder","Add tags"),g(a,"id","side-panel-tags"),g(v,"type","text"),g(v,"placeholder","Add a description"),v.value=T=t[1].description?t[1].description:null,g(w,"id","side-panel-description"),g(n,"id","side-panel-container"),g(e,"id","task-side-pane")},m(I,L){O(I,e,L),h(e,n),h(n,s),h(s,i),h(n,o),h(n,u),h(n,r),h(n,a),b&&b.m(a,null),h(a,c),h(a,d),h(n,p),h(n,f),h(n,m),h(n,w),h(w,v),h(n,y),h(n,E),j=!0,U||(G=[M(d,"change",t[3]),M(v,"change",t[4])],U=!0)},p(I,L){(!j||L&2)&&l!==(l=I[1].title+"")&&H(i,l),I[1].tags.length>=0?b?(b.p(I,L),L&2&&_(b,1)):(b=Re(I),b.c(),_(b,1),b.m(a,c)):b&&(z(),$(b,1,1,()=>{b=null}),Y()),(!j||L&2&&T!==(T=I[1].description?I[1].description:null)&&v.value!==T)&&(v.value=T)},i(I){j||(_(b),j=!0)},o(I){$(b),j=!1},d(I){I&&P(e),b&&b.d(),U=!1,D(G)}}}function Re(t){let e,n,s=J(t[1].tags),l=[];for(let o=0;o<s.length;o+=1)l[o]=qe(De(t,s,o));const i=o=>$(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=le()},m(o,u){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,u);O(o,e,u),n=!0},p(o,u){if(u&2){s=J(o[1].tags);let r;for(r=0;r<s.length;r+=1){const a=De(o,s,r);l[r]?(l[r].p(a,u),_(l[r],1)):(l[r]=qe(a),l[r].c(),_(l[r],1),l[r].m(e.parentNode,e))}for(z(),r=s.length;r<l.length;r+=1)i(r);Y()}},i(o){if(!n){for(let u=0;u<s.length;u+=1)_(l[u]);n=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)$(l[u]);n=!1},d(o){o&&P(e),ke(l,o)}}}function qe(t){let e,n;return e=new Ve({props:{taskId:t[1].id,value:t[5]}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const i={};l&2&&(i.taskId=s[1].id),l&2&&(i.value=s[5]),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Vt(t){let e,n,s=t[0].sidePane.isOpen&&t[1]!=null&&Ke(t);return{c(){s&&s.c(),e=le()},m(l,i){s&&s.m(l,i),O(l,e,i),n=!0},p(l,[i]){l[0].sidePane.isOpen&&l[1]!=null?s?(s.p(l,i),i&3&&_(s,1)):(s=Ke(l),s.c(),_(s,1),s.m(e.parentNode,e)):s&&(z(),$(s,1,1,()=>{s=null}),Y())},i(l){n||(_(s),n=!0)},o(l){$(s),n=!1},d(l){l&&P(e),s&&s.d(l)}}}function Gt(t,e,n){let s,l,i;ee(t,ne,r=>n(0,l=r)),ee(t,C,r=>n(2,i=r));const o=r=>s!=null&&C.updateTask(s.id,a=>{let c={...a,tags:[...a.tags,...r.currentTarget.value.split(" ")]};return r.currentTarget.value="",c}),u=r=>s!=null&&C.updateTask(s.id,a=>({...a,description:r.currentTarget.value}));return t.$$.update=()=>{t.$$.dirty&5&&n(1,s=l.sidePane.selectedTaskId!=null?i[l.sidePane.selectedTaskId]:null)},[l,s,i,o,u]}class Zt extends q{constructor(e){super(),R(this,e,Gt,Vt,K,{})}}function Qt(t){let e,n,s,l,i,o,u,r,a,c,d,p;return n=new bt({}),l=new Nt({}),o=new We({props:{category:"In-Progress",taskList:t[1]}}),r=new We({props:{category:"Finished",taskList:t[2]}}),d=new Zt({}),{c(){e=k("div"),B(n.$$.fragment),s=S(),B(l.$$.fragment),i=S(),B(o.$$.fragment),u=S(),B(r.$$.fragment),c=S(),B(d.$$.fragment),g(e,"id","main-panel"),g(e,"style",a=`width: ${t[0].sidePane.isOpen?"55%":"95%"}`)},m(f,m){O(f,e,m),F(n,e,null),h(e,s),F(l,e,null),h(e,i),F(o,e,null),h(e,u),F(r,e,null),O(f,c,m),F(d,f,m),p=!0},p(f,m){const w={};m&2&&(w.taskList=f[1]),o.$set(w);const v={};m&4&&(v.taskList=f[2]),r.$set(v),(!p||m&1&&a!==(a=`width: ${f[0].sidePane.isOpen?"55%":"95%"}`))&&g(e,"style",a)},i(f){p||(_(n.$$.fragment,f),_(l.$$.fragment,f),_(o.$$.fragment,f),_(r.$$.fragment,f),_(d.$$.fragment,f),p=!0)},o(f){$(n.$$.fragment,f),$(l.$$.fragment,f),$(o.$$.fragment,f),$(r.$$.fragment,f),$(d.$$.fragment,f),p=!1},d(f){f&&(P(e),P(c)),N(n),N(l),N(o),N(r),N(d,f)}}}function xt(t){let e,n;return e=new gt({props:{$$slots:{default:[Qt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,[l]){const i={};l&15&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function en(t,e,n){let s,l,i;return ee(t,ne,o=>n(0,s=o)),ee(t,vt,o=>n(1,l=o)),ee(t,Ot,o=>n(2,i=o)),[s,l,i]}class tn extends q{constructor(e){super(),R(this,e,en,xt,K,{})}}new tn({target:document.body});
