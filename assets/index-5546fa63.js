var _t=Object.defineProperty;var kt=(t,e,n)=>e in t?_t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var we=(t,e,n)=>(kt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function M(){}function bt(t,e){for(const n in e)t[n]=e[n];return t}function dt(t){return t()}function Ye(){return Object.create(null)}function R(t){t.forEach(dt)}function de(t){return typeof t=="function"}function U(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function $t(t){return Object.keys(t).length===0}function Pe(t,...e){if(t==null){for(const s of e)s(void 0);return M}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ce(t,e,n){t.$$.on_destroy.push(Pe(e,n))}function ve(t,e,n,s){if(t){const l=pt(t,e,n,s);return t[0](l)}}function pt(t,e,n,s){return t[1]&&s?bt(n.ctx.slice(),t[1](s(e))):n.ctx}function Se(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const i=[],r=Math.max(e.dirty.length,l.length);for(let o=0;o<r;o+=1)i[o]=e.dirty[o]|l[o];return i}return e.dirty|l}return e.dirty}function De(t,e,n,s,l,i){if(l){const r=pt(e,n,s,i);t.p(r,l)}}function Oe(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function wt(t){return t&&de(t.destroy)?t.destroy:M}const yt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function h(t,e){t.appendChild(e)}function D(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function Ce(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function B(t){return document.createTextNode(t)}function P(){return B(" ")}function ue(){return B("")}function L(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function ht(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tt(t){return Array.from(t.childNodes)}function V(t,e){e=""+e,t.data!==e&&(t.data=e)}function Je(t,e){t.value=e??""}function he(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function H(t,e,n){t.classList.toggle(e,!!n)}let Le;function fe(t){Le=t}function It(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const ae=[],_e=[];let oe=[];const Ve=[],Pt=Promise.resolve();let Te=!1;function vt(){Te||(Te=!0,Pt.then(gt))}function Ie(t){oe.push(t)}const ye=new Set;let ie=0;function gt(){if(ie!==0)return;const t=Le;do{try{for(;ie<ae.length;){const e=ae[ie];ie++,fe(e),St(e.$$)}}catch(e){throw ae.length=0,ie=0,e}for(fe(null),ae.length=0,ie=0;_e.length;)_e.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];ye.has(n)||(ye.add(n),n())}oe.length=0}while(ae.length);for(;Ve.length;)Ve.pop()();Te=!1,ye.clear(),fe(t)}function St(t){if(t.fragment!==null){t.update(),R(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ie)}}function Dt(t){const e=[],n=[];oe.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),oe=e}const me=new Set;let ne;function Q(){ne={r:0,c:[],p:ne}}function x(){ne.r||R(ne.c),ne=ne.p}function k(t,e){t&&t.i&&(me.delete(t),t.i(e))}function $(t,e,n,s){if(t&&t.o){if(me.has(t))return;me.add(t),ne.c.push(()=>{me.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function ee(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ot(t,e){$(t,1,1,()=>{e.delete(t.key)})}function Ct(t,e,n,s,l,i,r,o,a,u,c,d){let f=t.length,p=i.length,m=f;const I={};for(;m--;)I[t[m].key]=m;const O=[],y=new Map,b=new Map,w=[];for(m=p;m--;){const T=d(l,i,m),q=n(T);let N=r.get(q);N?s&&w.push(()=>N.p(T,e)):(N=u(q,T),N.c()),y.set(q,O[m]=N),q in I&&b.set(q,Math.abs(m-I[q]))}const C=new Set,K=new Set;function le(T){k(T,1),T.m(o,c),r.set(T.key,T),c=T.first,p--}for(;f&&p;){const T=O[p-1],q=t[f-1],N=T.key,G=q.key;T===q?(c=T.first,f--,p--):y.has(G)?!r.has(N)||C.has(N)?le(T):K.has(G)?f--:b.get(N)>b.get(G)?(K.add(N),le(T)):(C.add(G),f--):(a(q,r),f--)}for(;f--;){const T=t[f];y.has(T.key)||a(T,r)}for(;p;)le(O[p-1]);return R(w),O}function W(t){t&&t.c()}function E(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),Ie(()=>{const i=t.$$.on_mount.map(dt).filter(de);t.$$.on_destroy?t.$$.on_destroy.push(...i):R(i),t.$$.on_mount=[]}),l.forEach(Ie)}function j(t,e){const n=t.$$;n.fragment!==null&&(Dt(n.after_update),R(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Lt(t,e){t.$$.dirty[0]===-1&&(ae.push(t),vt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(t,e,n,s,l,i,r,o=[-1]){const a=Le;fe(t);const u=t.$$={fragment:null,ctx:[],props:i,update:M,not_equal:l,bound:Ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ye(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(d,f,...p)=>{const m=p.length?p[0]:f;return u.ctx&&l(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),c&&Lt(t,d)),f}):[],u.update(),c=!0,R(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const d=Tt(e.target);u.fragment&&u.fragment.l(d),d.forEach(v)}else u.fragment&&u.fragment.c();e.intro&&k(t.$$.fragment),E(t,e.target,e.anchor),gt()}fe(a)}class Y{constructor(){we(this,"$$");we(this,"$$set")}$destroy(){j(this,1),this.$destroy=M}$on(e,n){if(!de(n))return M;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!$t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mt);function At(t){let e,n,s,l,i;const r=t[1].default,o=ve(r,t,t[0],null);return{c(){e=_("div"),n=_("main"),o&&o.c(),g(e,"class","app"),g(e,"role","application")},m(a,u){D(a,e,u),h(e,n),o&&o.m(n,null),s=!0,l||(i=L(e,"contextmenu",ht(t[2])),l=!0)},p(a,u){o&&o.p&&(!s||u&1)&&De(o,r,a,a[0],s?Se(r,a[0],u,null):Oe(a[0]),null)},i(a){s||(k(o,a),s=!0)},o(a){$(o,a),s=!1},d(a){a&&v(e),o&&o.d(a),l=!1,i()}}}function Ft(t){let e,n,s;const l=t[1].default,i=ve(l,t,t[0],null);return{c(){e=_("div"),n=_("main"),i&&i.c(),g(e,"class","app"),g(e,"role","application")},m(r,o){D(r,e,o),h(e,n),i&&i.m(n,null),s=!0},p(r,o){i&&i.p&&(!s||o&1)&&De(i,l,r,r[0],s?Se(l,r[0],o,null):Oe(r[0]),null)},i(r){s||(k(i,r),s=!0)},o(r){$(i,r),s=!1},d(r){r&&v(e),i&&i.d(r)}}}function Nt(t){let e,n,s,l;const i=[Ft,At],r=[];function o(a,u){return 0}return e=o(),n=r[e]=i[e](t),{c(){n.c(),s=ue()},m(a,u){r[e].m(a,u),D(a,s,u),l=!0},p(a,[u]){n.p(a,u)},i(a){l||(k(n),l=!0)},o(a){$(n),l=!1},d(a){a&&v(s),r[e].d(a)}}}function Et(t,e,n){let{$$slots:s={},$$scope:l}=e;function i(r){It.call(this,t,r)}return t.$$set=r=>{"$$scope"in r&&n(0,l=r.$$scope)},[l,s,i]}class jt extends Y{constructor(e){super(),z(this,e,Et,Nt,U,{})}}const Bt="/Tusker/assets/tusker-logo-poly-5836d0cb.png";function Wt(t){let e;return{c(){e=_("span"),e.innerHTML=`<img id="logo-img" src="${Bt}" alt="Tusker Logo"/> <div><h1>Tusker</h1></div>`,g(e,"id","logo-container")},m(n,s){D(n,e,s)},p:M,i:M,o:M,d(n){n&&v(e)}}}class qt extends Y{constructor(e){super(),z(this,e,null,Wt,U,{})}}const re=[];function Kt(t,e){return{subscribe:Me(t,e).subscribe}}function Me(t,e=M){let n;const s=new Set;function l(o){if(U(t,o)&&(t=o,n)){const a=!re.length;for(const u of s)u[1](),re.push(u,t);if(a){for(let u=0;u<re.length;u+=2)re[u][0](re[u+1]);re.length=0}}}function i(o){l(o(t))}function r(o,a=M){const u=[o,a];return s.add(u),s.size===1&&(n=e(l,i)||M),o(t),()=>{s.delete(u),s.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:r}}function ke(t,e,n){const s=!Array.isArray(t),l=s?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Kt(n,(r,o)=>{let a=!1;const u=[];let c=0,d=M;const f=()=>{if(c)return;d();const m=e(s?u[0]:u,r,o);i?r(m):d=de(m)?m:M},p=l.map((m,I)=>Pe(m,O=>{u[I]=O,c&=~(1<<I),a&&f()},()=>{c|=1<<I}));return a=!0,f(),function(){R(p),d(),a=!1}})}const Rt=(t,e)=>{const n=window.localStorage.getItem(t);return n?JSON.parse(n):e},Ut=(t,e)=>{e(n=>{window.localStorage.setItem(t,JSON.stringify(n))})},Xt=(t,e)=>{const n=Rt(t,e),{subscribe:s,set:l,update:i}=Me(n);return Ut(t,s),{subscribe:s,set:l,update:i}},Ht="tusker/tasks",zt=()=>{const{subscribe:t,set:e,update:n}=Xt(Ht,[]);let s=o=>o.length?Math.max(...o.map(a=>a.id))+1:0,l=(o,a)=>o.filter(u=>u.id==a)[0],i=o=>n(a=>[...a,{id:s(a),creationDate:Date.now(),...o}]),r=(o,a)=>n(u=>u.map(c=>(c.id==o&&(c={...c,...a(l(u,o))}),c)));return{subscribe:t,set:e,updateTask:r,toggleTaskState:(o,a)=>r(o,u=>({...u,state:a??(u.state=="Finished"?"In-Progress":"Finished")})),addTask:i,addTasks:o=>{o.forEach(i)},addTaskByTitle:o=>i({title:o,state:"In-Progress",tags:[]}),deleteTask:o=>n(a=>a.filter(u=>u.id!=o)),deleteTasks:()=>e([]),deleteFinishedTasks:()=>n(o=>o.filter(a=>a.state!="Finished"))}},F=zt(),Yt=t=>ke(F,e=>{let n=e.filter(s=>s.id==t);return n.length==1?n[0]:null}),Jt=ke(F,t=>t.filter(e=>e.state!="Finished")),Vt=ke(F,t=>t.filter(e=>e.state=="Finished"));let Gt="https://api.ai21.com/studio/v1/j2-ultra/complete",Zt="OA6FRXUU6lln8U1jKldXZ2jtcyaplKl0",Qt=`Your mission is to accept a task descriptions and break it down into smaller task units.
Answer with markdown and write each task in a new line.
If a task unit includes multiple logical steps or elements, break it down to separate task units.
Pay close attention to details such as targets, dates, and requirements.
Each task unit must begin with an asterisk, and then the task unit's description.
Your input is between <input-start> and <input-end>.`,mt=async t=>{let e=new Headers;e.set("Content-Type","application/json"),e.set("Authorization",`Bearer ${Zt}`);let n=JSON.stringify({prompt:`${Qt}
<input-start>${t}<input-end>`,numResults:1,epoch:0,maxTokens:400,temperature:0,topKReturn:0,topP:1,presencePenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},countPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},frequencyPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},stopSequences:[]}),s=new Request(Gt,{method:"POST",headers:e,body:n}),l=await(await fetch(s)).json();return xt(l.completions[0].data.text)},xt=t=>t.split(`
`).map(en).filter(e=>!!e.trim()).map(e=>({title:e,state:"In-Progress",tags:[]})),en=t=>t.startsWith("* ")?t.replace("* ",""):t;function Ge(t){let e,n=t[0]?"[SMART]":"[MANUAL]",s;return{c(){e=_("span"),s=B(n),g(e,"class","task-input-mode")},m(l,i){D(l,e,i),h(e,s)},p(l,i){i&1&&n!==(n=l[0]?"[SMART]":"[MANUAL]")&&V(s,n)},d(l){l&&v(e)}}}function tn(t){let e,n,s,l,i,r,o,a,u=t[1]&&Ge(t);return{c(){e=_("div"),n=_("button"),s=_("span"),s.innerHTML='<input type="checkbox" disabled=""/>',l=P(),i=_("input"),r=P(),u&&u.c(),g(s,"class","task-item-checkbox"),g(i,"type","text"),g(i,"placeholder",t[5]),i.disabled=t[4],g(i,"class","manual-task-input-textbox"),g(n,"class","task-item"),H(n,"isFocus",t[1]),H(n,"isLoading",t[4]),g(e,"class","new-task-input")},m(c,d){D(c,e,d),h(e,n),h(n,s),h(n,l),h(n,i),Je(i,t[3]),t[8](i),h(n,r),u&&u.m(n,null),o||(a=[L(i,"input",t[7]),L(i,"focus",t[9]),L(i,"blur",t[10]),L(n,"click",t[11]),L(n,"keydown",t[6])],o=!0)},p(c,[d]){d&32&&g(i,"placeholder",c[5]),d&16&&(i.disabled=c[4]),d&8&&i.value!==c[3]&&Je(i,c[3]),c[1]?u?u.p(c,d):(u=Ge(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null),d&2&&H(n,"isFocus",c[1]),d&16&&H(n,"isLoading",c[4])},i:M,o:M,d(c){c&&v(e),t[8](null),u&&u.d(),o=!1,R(a)}}}function nn(t,e,n){let s,l,i,r=!1,o=!1,a=!1,u=async y=>{y.key=="Enter"&&i.trim()&&(r?(n(4,a=!0),(await mt(i)).forEach(F.addTask),n(4,a=!1)):F.addTaskByTitle(i),n(3,i=""))},c=y=>{y.ctrlKey&&y.altKey&&(y.preventDefault(),n(0,r=!r))},d=y=>{c(y),u(y)};function f(){i=this.value,n(3,i)}function p(y){_e[y?"unshift":"push"](()=>{l=y,n(2,l)})}const m=()=>n(1,o=!0),I=()=>n(1,o=!1),O=()=>l.focus();return t.$$.update=()=>{t.$$.dirty&3&&n(5,s=(r?"Describe your tasks":"Add a task		")+(o?"	(Press Ctrl+Alt to toggle input mode)":""))},[r,o,l,i,a,s,d,f,p,m,I,O]}class sn extends Y{constructor(e){super(),z(this,e,nn,tn,U,{})}}const ln="/Tusker/assets/ding-c54d088f.mp3";const rn=()=>{const{subscribe:t,set:e,update:n}=Me({sidePane:{isOpen:!1,selectedTaskId:null},contextMenu:{isOpen:!1}});return{subscribe:t,toggleSidePane:s=>n(l=>s!=null&&s!=l.sidePane.selectedTaskId?{...l,sidePane:{isOpen:!0,selectedTaskId:s}}:{...l,sidePane:{isOpen:!1,selectedTaskId:null}}),closeSidePane:()=>n(s=>({...s,sidePane:{isOpen:!1,selectedTaskId:null}})),toggleContextMenu:()=>n(s=>({...s,contextMenu:{isOpen:!s.contextMenu.isOpen}})),updateContextMenu:s=>n(l=>({...l,contextMenu:{isOpen:s}}))}},se=rn();ke(se,t=>t.sidePane.isOpen);const{window:Ze}=yt;function Qe(t,e,n){const s=t.slice();return s[15]=e[n],s}function xe(t){let e,n,s,l,i,r=ee(t[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=et(Qe(t,r,a));return{c(){e=_("nav"),n=_("div"),s=_("ul");for(let a=0;a<o.length;a+=1)o[a].c();g(n,"class","navbar"),g(n,"id","navbar"),he(e,"top",t[3].y+"px"),he(e,"left",t[3].x+"px")},m(a,u){D(a,e,u),h(e,n),h(n,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null);l||(i=wt(t[7].call(null,e)),l=!0)},p(a,u){if(u&65){r=ee(a[0]);let c;for(c=0;c<r.length;c+=1){const d=Qe(a,r,c);o[c]?o[c].p(d,u):(o[c]=et(d),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}u&8&&he(e,"top",a[3].y+"px"),u&8&&he(e,"left",a[3].x+"px")},d(a){a&&v(e),Ce(o,a),l=!1,i()}}}function et(t){let e,n,s,l=(t[15].icon?t[15].icon:"")+"",i,r,o,a=t[15].displayText+"",u,c,d,f;function p(...m){return t[10](t[15],...m)}return{c(){e=_("li"),n=_("button"),s=_("span"),i=B(l),r=P(),o=_("span"),u=B(a),c=P(),g(s,"class","context-menu-li-icon"),g(o,"class","context-menu-li-text")},m(m,I){D(m,e,I),h(e,n),h(n,s),h(s,i),h(n,r),h(n,o),h(o,u),h(n,c),d||(f=L(n,"click",p),d=!0)},p(m,I){t=m,I&1&&l!==(l=(t[15].icon?t[15].icon:"")+"")&&V(i,l),I&1&&a!==(a=t[15].displayText+"")&&V(u,a)},d(m){m&&v(e),d=!1,f()}}}function an(t){let e,n,s,l,i,r=t[1]&&xe(t);const o=t[9].default,a=ve(o,t,t[8],null);return{c(){r&&r.c(),e=P(),n=_("span"),a&&a.c()},m(u,c){r&&r.m(u,c),D(u,e,c),D(u,n,c),a&&a.m(n,null),t[11](n),s=!0,l||(i=[L(Ze,"click",t[6]),L(Ze,"contextmenu",t[5]),L(n,"contextmenu",ht(t[4]))],l=!0)},p(u,[c]){u[1]?r?r.p(u,c):(r=xe(u),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a&&a.p&&(!s||c&256)&&De(a,o,u,u[8],s?Se(o,u[8],c,null):Oe(u[8]),null)},i(u){s||(k(a,u),s=!0)},o(u){$(a,u),s=!1},d(u){u&&(v(e),v(n)),r&&r.d(u),a&&a.d(u),t[11](null),l=!1,R(i)}}}function on(t,e,n){let{$$slots:s={},$$scope:l}=e,{menuItems:i=[]}=e,r,o={x:0,y:0},a={h:0,w:0},u={h:0,w:0},c=!1,d=b=>{n(1,c=!0),u={w:window.innerWidth,h:window.innerHeight},n(3,o={x:b.clientX+document.documentElement.scrollLeft,y:b.clientY+document.documentElement.scrollTop}),u.h-o.y<a.h&&n(3,o.y=o.y-a.h,o),u.w-o.x<a.w&&n(3,o.x=o.x-a.w,o)},f=b=>{var w,C;return r.children[0]==b?!0:(C=(w=r.children[0])==null?void 0:w.children)!=null&&C.length?[...r.children[0].children].some(K=>K==b):!1},p=b=>{var w;((w=r==null?void 0:r.children)==null?void 0:w.length)==1?n(1,c=f(b.target)):n(1,c=!1)},m=()=>{n(1,c=!1)},I=b=>{a={h:b.offsetHeight,w:b.offsetWidth}};const O=(b,w)=>{b.onClick(),w.stopPropagation(),m()};function y(b){_e[b?"unshift":"push"](()=>{r=b,n(2,r)})}return t.$$set=b=>{"menuItems"in b&&n(0,i=b.menuItems),"$$scope"in b&&n(8,l=b.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&se.updateContextMenu(c)},[i,c,r,o,d,p,m,I,l,s,O,y]}class Ae extends Y{constructor(e){super(),z(this,e,on,an,U,{menuItems:0})}}function un(t){let e,n;return{c(){e=_("div"),n=B(t[0]),g(e,"class","task-item-tag")},m(s,l){D(s,e,l),h(e,n)},p(s,l){l&1&&V(n,s[0])},d(s){s&&v(e)}}}function cn(t){let e,n;return e=new Ae({props:{menuItems:t[1],$$slots:{default:[un]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,[l]){const i={};l&9&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function fn(t,e,n){let{value:s}=e,{taskId:l}=e,i=l!=null?[{name:"deleteTag",onClick:()=>l!=null&&F.updateTask(l,r=>({...r,tags:r.tags.filter(o=>o!=s)})),displayText:"Delete tag",icon:"X",states:["In-Progress","Finished"]}]:[];return t.$$set=r=>{"value"in r&&n(0,s=r.value),"taskId"in r&&n(2,l=r.taskId)},[s,i,l]}class Fe extends Y{constructor(e){super(),z(this,e,fn,cn,U,{value:0,taskId:2})}}function tt(t,e,n){const s=t.slice();return s[9]=e[n],s}function dn(t){let e,n;return e=new Fe({props:{taskId:null,value:". . . ."}}),{c(){W(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p:M,i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function pn(t){let e,n,s=ee(t[0].tags),l=[];for(let r=0;r<s.length;r+=1)l[r]=nt(tt(t,s,r));const i=r=>$(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ue()},m(r,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(r,o);D(r,e,o),n=!0},p(r,o){if(o&1){s=ee(r[0].tags);let a;for(a=0;a<s.length;a+=1){const u=tt(r,s,a);l[a]?(l[a].p(u,o),k(l[a],1)):(l[a]=nt(u),l[a].c(),k(l[a],1),l[a].m(e.parentNode,e))}for(Q(),a=s.length;a<l.length;a+=1)i(a);x()}},i(r){if(!n){for(let o=0;o<s.length;o+=1)k(l[o]);n=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)$(l[o]);n=!1},d(r){r&&v(e),Ce(l,r)}}}function nt(t){let e,n;return e=new Fe({props:{taskId:t[0].id,value:t[9]}}),{c(){W(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,l){const i={};l&1&&(i.taskId=s[0].id),l&1&&(i.value=s[9]),e.$set(i)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function hn(t){let e,n,s,l,i,r=t[0].title+"",o,a,u,c,d,f,p,m,I;const O=[pn,dn],y=[];function b(w,C){return C&5&&(c=null),c==null&&(c=w[0].tags.join(" ").length<(w[2].sidePane.isOpen?10:25)),c?0:1}return d=b(t,-1),f=y[d]=O[d](t),{c(){e=_("button"),n=_("span"),s=_("input"),l=P(),i=_("span"),o=B(r),a=P(),u=_("span"),f.c(),g(s,"type","checkbox"),g(n,"class","task-item-checkbox"),g(i,"class","task-item-title"),g(u,"class","task-item-tags"),g(e,"class","task-item"),H(e,"isFinished",t[1])},m(w,C){D(w,e,C),h(e,n),h(n,s),s.checked=t[1],h(e,l),h(e,i),h(i,o),h(e,a),h(e,u),y[d].m(u,null),p=!0,m||(I=[L(s,"change",t[5]),L(s,"click",t[4]),L(e,"click",t[6])],m=!0)},p(w,C){C&2&&(s.checked=w[1]),(!p||C&1)&&r!==(r=w[0].title+"")&&V(o,r);let K=d;d=b(w,C),d===K?y[d].p(w,C):(Q(),$(y[K],1,1,()=>{y[K]=null}),x(),f=y[d],f?f.p(w,C):(f=y[d]=O[d](w),f.c()),k(f,1),f.m(u,null)),(!p||C&2)&&H(e,"isFinished",w[1])},i(w){p||(k(f),p=!0)},o(w){$(f),p=!1},d(w){w&&v(e),y[d].d(),m=!1,R(I)}}}function gn(t){let e,n;return e=new Ae({props:{menuItems:t[3].filter(t[7]),$$slots:{default:[hn]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,[l]){const i={};l&1&&(i.menuItems=s[3].filter(s[7])),l&4103&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function mn(t,e,n){let s,l;ce(t,se,f=>n(2,l=f));let{task:i}=e,r=new Audio(ln),o=[{name:"toggleTask",onClick:()=>F.toggleTaskState(i.id,"In-Progress"),displayText:"Mark as not finished",icon:"⍻",states:["Finished"]},{name:"toggleTask",onClick:()=>F.toggleTaskState(i.id,"Finished"),displayText:"Mark as finished",icon:"✓",states:["In-Progress"]},{name:"breakdownTask",onClick:async()=>{(await mt(i.title)).map(f=>({...i,...f})).forEach(F.addTask),F.deleteTask(i.id)},displayText:"Breakdown",icon:"☄",states:["In-Progress"]},{name:"deleteTask",onClick:()=>F.deleteTask(i.id),displayText:"Delete task",icon:"X",states:["In-Progress","Finished"]}],a=f=>{F.toggleTaskState(i.id),f!=null&&f.target.checked&&r.play()};function u(){s=this.checked,n(1,s),n(0,i)}const c=()=>se.toggleSidePane(i.id),d=f=>f.states.includes(i.state);return t.$$set=f=>{"task"in f&&n(0,i=f.task)},t.$$.update=()=>{t.$$.dirty&1&&n(1,s=i.state=="Finished")},[i,s,l,o,a,u,c,d]}class _n extends Y{constructor(e){super(),z(this,e,mn,gn,U,{task:0})}}function st(t,e,n){const s=t.slice();return s[5]=e[n],s}function lt(t){let e,n;return e=new Ae({props:{menuItems:t[3],$$slots:{default:[kn]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,l){const i={};l&263&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function kn(t){let e,n,s,l,i,r,o=t[0].length+"",a,u,c,d;return{c(){e=_("button"),n=_("span"),n.textContent="▶",s=P(),l=_("span"),i=B(t[1]),r=B(" ("),a=B(o),u=B(")"),g(n,"class","task-list-button-triangle"),H(n,"showTasks",t[2]),g(l,"class","task-list-button-text"),g(e,"class","task-list-button")},m(f,p){D(f,e,p),h(e,n),h(e,s),h(e,l),h(l,i),h(l,r),h(l,a),h(l,u),c||(d=L(e,"click",t[4]),c=!0)},p(f,p){p&4&&H(n,"showTasks",f[2]),p&2&&V(i,f[1]),p&1&&o!==(o=f[0].length+"")&&V(a,o)},d(f){f&&v(e),c=!1,d()}}}function it(t){let e=[],n=new Map,s,l,i=ee(t[0]);const r=o=>o[5].id;for(let o=0;o<i.length;o+=1){let a=st(t,i,o),u=r(a);n.set(u,e[o]=rt(u,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();s=ue()},m(o,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(o,a);D(o,s,a),l=!0},p(o,a){a&1&&(i=ee(o[0]),Q(),e=Ct(e,a,r,1,o,i,n,s.parentNode,Ot,rt,s,st),x())},i(o){if(!l){for(let a=0;a<i.length;a+=1)k(e[a]);l=!0}},o(o){for(let a=0;a<e.length;a+=1)$(e[a]);l=!1},d(o){o&&v(s);for(let a=0;a<e.length;a+=1)e[a].d(o)}}}function rt(t,e){let n,s,l;return s=new _n({props:{task:e[5]}}),{key:t,first:null,c(){n=ue(),W(s.$$.fragment),this.first=n},m(i,r){D(i,n,r),E(s,i,r),l=!0},p(i,r){e=i;const o={};r&1&&(o.task=e[5]),s.$set(o)},i(i){l||(k(s.$$.fragment,i),l=!0)},o(i){$(s.$$.fragment,i),l=!1},d(i){i&&v(n),j(s,i)}}}function bn(t){let e,n,s,l=!!t[1]&&t[0].length&&lt(t),i=t[2]&&it(t);return{c(){e=_("div"),l&&l.c(),n=P(),i&&i.c(),g(e,"class","task-list")},m(r,o){D(r,e,o),l&&l.m(e,null),h(e,n),i&&i.m(e,null),s=!0},p(r,[o]){r[1]&&r[0].length?l?(l.p(r,o),o&3&&k(l,1)):(l=lt(r),l.c(),k(l,1),l.m(e,n)):l&&(Q(),$(l,1,1,()=>{l=null}),x()),r[2]?i?(i.p(r,o),o&4&&k(i,1)):(i=it(r),i.c(),k(i,1),i.m(e,null)):i&&(Q(),$(i,1,1,()=>{i=null}),x())},i(r){s||(k(l),k(i),s=!0)},o(r){$(l),$(i),s=!1},d(r){r&&v(e),l&&l.d(),i&&i.d()}}}function $n(t,e,n){let{taskList:s}=e,{category:l=void 0}=e,i=!0;const r=[{name:"deleteAll",displayText:"Delete tasks",onClick:()=>s.forEach(a=>F.deleteTask(a.id)),icon:"X"}],o=()=>n(2,i=!i);return t.$$set=a=>{"taskList"in a&&n(0,s=a.taskList),"category"in a&&n(1,l=a.category)},[s,l,i,r,o]}class at extends Y{constructor(e){super(),z(this,e,$n,bn,U,{taskList:0,category:1})}}let wn=t=>t.filter((e,n)=>t.indexOf(e)==n),ge=t=>{const e=new Date(t),n=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")} / ${n} / ${e.getFullYear()}`};function yn(t){let e,n,s;return{c(){e=_("input"),g(e,"class","datepicker"),g(e,"type","date")},m(l,i){D(l,e,i),n||(s=L(e,"change",function(){de(t[0])&&t[0].apply(this,arguments)}),n=!0)},p(l,[i]){t=l},i:M,o:M,d(l){l&&v(e),n=!1,s()}}}function Tn(t,e,n){let{onChange:s}=e;return t.$$set=l=>{"onChange"in l&&n(0,s=l.onChange)},[s]}class In extends Y{constructor(e){super(),z(this,e,Tn,yn,U,{onChange:0})}}function ot(t,e,n){const s=t.slice();return s[7]=e[n],s}function ut(t){var Ue;let e,n,s,l,i,r,o,a,u,c,d,f,p,m,I,O,y,b,w,C,K,le,T,q,N=ge(t[2].creationDate)+"",G,Ne,Ee,je,Z,Be,pe=((Ue=t[2])!=null&&Ue.dueDate?ge(t[2].dueDate):"not set")+"",be,We,te,qe,Ke,J,$e,Re,A=t[2].tags.length>=0&&ct(t);return te=new In({props:{onChange:t[6]}}),{c(){var S;e=_("div"),n=_("div"),s=_("button"),s.textContent="X",l=P(),i=_("span"),r=_("input"),a=P(),u=_("hr"),c=P(),d=_("span"),A&&A.c(),f=P(),p=_("input"),m=P(),I=_("hr"),O=P(),y=_("span"),b=_("input"),C=P(),K=_("hr"),le=P(),T=_("span"),q=B("Creation date: "),G=B(N),Ne=P(),Ee=_("br"),je=P(),Z=_("span"),Be=B("Due date: "),be=B(pe),We=P(),W(te.$$.fragment),qe=P(),Ke=_("hr"),g(s,"id","side-panel-close"),g(r,"type","text"),g(r,"placeholder","Task title"),r.value=o=t[2].title,g(i,"id","side-panel-title"),g(i,"class","side-panel-row"),g(p,"type","text"),g(p,"placeholder","Add tags"),g(d,"id","side-panel-tags"),g(d,"class","side-panel-row"),g(b,"type","text"),g(b,"placeholder","Add a description"),b.value=w=t[2].description?t[2].description:null,g(y,"id","side-panel-description"),g(y,"class","side-panel-row"),H(Z,"pastDueDate",((S=t[2])==null?void 0:S.dueDate)&&t[2].dueDate<Date.now()),g(T,"id","side-panel-dates"),g(T,"class","side-panel-row"),g(n,"id","side-panel-container"),g(e,"id","task-side-pane")},m(S,X){D(S,e,X),h(e,n),h(n,s),h(n,l),h(n,i),h(i,r),h(n,a),h(n,u),h(n,c),h(n,d),A&&A.m(d,null),h(d,f),h(d,p),h(n,m),h(n,I),h(n,O),h(n,y),h(y,b),h(n,C),h(n,K),h(n,le),h(n,T),h(T,q),h(T,G),h(T,Ne),h(T,Ee),h(T,je),h(T,Z),h(Z,Be),h(Z,be),h(Z,We),E(te,Z,null),h(n,qe),h(n,Ke),J=!0,$e||(Re=[L(s,"click",se.closeSidePane),L(r,"change",t[3]),L(p,"change",t[4]),L(b,"change",t[5])],$e=!0)},p(S,X){var He,ze;(!J||X&4&&o!==(o=S[2].title)&&r.value!==o)&&(r.value=o),S[2].tags.length>=0?A?(A.p(S,X),X&4&&k(A,1)):(A=ct(S),A.c(),k(A,1),A.m(d,f)):A&&(Q(),$(A,1,1,()=>{A=null}),x()),(!J||X&4&&w!==(w=S[2].description?S[2].description:null)&&b.value!==w)&&(b.value=w),(!J||X&4)&&N!==(N=ge(S[2].creationDate)+"")&&V(G,N),(!J||X&4)&&pe!==(pe=((He=S[2])!=null&&He.dueDate?ge(S[2].dueDate):"not set")+"")&&V(be,pe);const Xe={};X&4&&(Xe.onChange=S[6]),te.$set(Xe),(!J||X&4)&&H(Z,"pastDueDate",((ze=S[2])==null?void 0:ze.dueDate)&&S[2].dueDate<Date.now())},i(S){J||(k(A),k(te.$$.fragment,S),J=!0)},o(S){$(A),$(te.$$.fragment,S),J=!1},d(S){S&&v(e),A&&A.d(),j(te),$e=!1,R(Re)}}}function ct(t){let e,n,s=ee(t[2].tags),l=[];for(let r=0;r<s.length;r+=1)l[r]=ft(ot(t,s,r));const i=r=>$(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ue()},m(r,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(r,o);D(r,e,o),n=!0},p(r,o){if(o&4){s=ee(r[2].tags);let a;for(a=0;a<s.length;a+=1){const u=ot(r,s,a);l[a]?(l[a].p(u,o),k(l[a],1)):(l[a]=ft(u),l[a].c(),k(l[a],1),l[a].m(e.parentNode,e))}for(Q(),a=s.length;a<l.length;a+=1)i(a);x()}},i(r){if(!n){for(let o=0;o<s.length;o+=1)k(l[o]);n=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)$(l[o]);n=!1},d(r){r&&v(e),Ce(l,r)}}}function ft(t){let e,n;return e=new Fe({props:{taskId:t[2].id,value:t[7]}}),{c(){W(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,l){const i={};l&4&&(i.taskId=s[2].id),l&4&&(i.value=s[7]),e.$set(i)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function Pn(t){let e,n,s=t[0].sidePane.isOpen&&t[2]!=null&&ut(t);return{c(){s&&s.c(),e=ue()},m(l,i){s&&s.m(l,i),D(l,e,i),n=!0},p(l,[i]){l[0].sidePane.isOpen&&l[2]!=null?s?(s.p(l,i),i&5&&k(s,1)):(s=ut(l),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(Q(),$(s,1,1,()=>{s=null}),x())},i(l){n||(k(s),n=!0)},o(l){$(s),n=!1},d(l){l&&v(e),s&&s.d(l)}}}function vn(t,e,n){let s,l,i,r=M,o=()=>(r(),r=Pe(s,f=>n(2,i=f)),s);ce(t,se,f=>n(0,l=f)),t.$$.on_destroy.push(()=>r());const a=f=>i!=null&&F.updateTask(i.id,p=>({...p,title:f.currentTarget.value.length?f.currentTarget.value:p.title})),u=f=>i!=null&&F.updateTask(i.id,p=>{let m={...p,tags:wn([...p.tags,...f.currentTarget.value.split(" ")])};return f.currentTarget.value="",m}),c=f=>i!=null&&F.updateTask(i.id,p=>({...p,description:f.currentTarget.value})),d=f=>{i&&F.updateTask(i.id,p=>({...p,dueDate:Date.parse(f.currentTarget.value)}))};return t.$$.update=()=>{t.$$.dirty&1&&o(n(1,s=l.sidePane.selectedTaskId!=null?Yt(l.sidePane.selectedTaskId):null))},[l,s,i,a,u,c,d]}class Sn extends Y{constructor(e){super(),z(this,e,vn,Pn,U,{})}}function Dn(t){let e,n,s,l,i,r,o,a,u,c,d,f;return n=new qt({}),l=new sn({}),r=new at({props:{category:"In-Progress",taskList:t[1]}}),a=new at({props:{category:"Finished",taskList:t[2]}}),d=new Sn({}),{c(){e=_("div"),W(n.$$.fragment),s=P(),W(l.$$.fragment),i=P(),W(r.$$.fragment),o=P(),W(a.$$.fragment),c=P(),W(d.$$.fragment),g(e,"id","main-panel"),g(e,"style",u=`width: ${t[0].sidePane.isOpen?"55%":"95%"}`)},m(p,m){D(p,e,m),E(n,e,null),h(e,s),E(l,e,null),h(e,i),E(r,e,null),h(e,o),E(a,e,null),D(p,c,m),E(d,p,m),f=!0},p(p,m){const I={};m&2&&(I.taskList=p[1]),r.$set(I);const O={};m&4&&(O.taskList=p[2]),a.$set(O),(!f||m&1&&u!==(u=`width: ${p[0].sidePane.isOpen?"55%":"95%"}`))&&g(e,"style",u)},i(p){f||(k(n.$$.fragment,p),k(l.$$.fragment,p),k(r.$$.fragment,p),k(a.$$.fragment,p),k(d.$$.fragment,p),f=!0)},o(p){$(n.$$.fragment,p),$(l.$$.fragment,p),$(r.$$.fragment,p),$(a.$$.fragment,p),$(d.$$.fragment,p),f=!1},d(p){p&&(v(e),v(c)),j(n),j(l),j(r),j(a),j(d,p)}}}function On(t){let e,n;return e=new jt({props:{$$slots:{default:[Dn]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,[l]){const i={};l&15&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function Cn(t,e,n){let s,l,i;return ce(t,se,r=>n(0,s=r)),ce(t,Jt,r=>n(1,l=r)),ce(t,Vt,r=>n(2,i=r)),[s,l,i]}class Ln extends Y{constructor(e){super(),z(this,e,Cn,On,U,{})}}new Ln({target:document.body});
