var Ge=Object.defineProperty;var Ze=(t,e,n)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>(Ze(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function C(){}function Qe(t,e){for(const n in e)t[n]=e[n];return t}function Xe(t){return t()}function Ie(){return Object.create(null)}function D(t){t.forEach(Xe)}function ae(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xe(t){return Object.keys(t).length===0}function me(t,...e){if(t==null){for(const s of e)s(void 0);return C}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ne(t,e,n){t.$$.on_destroy.push(me(e,n))}function ge(t,e,n,s){if(t){const l=He(t,e,n,s);return t[0](l)}}function He(t,e,n,s){return t[1]&&s?Qe(n.ctx.slice(),t[1](s(e))):n.ctx}function _e(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const i=[],r=Math.max(e.dirty.length,l.length);for(let u=0;u<r;u+=1)i[u]=e.dirty[u]|l[u];return i}return e.dirty|l}return e.dirty}function ke(t,e,n,s,l,i){if(l){const r=He(e,n,s,i);t.p(r,l)}}function be(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function et(t){return t&&ae(t.destroy)?t.destroy:C}const tt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function h(t,e){t.appendChild(e)}function O(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function $e(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function W(t){return document.createTextNode(t)}function S(){return W(" ")}function le(){return W("")}function M(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function ze(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nt(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function Pe(t,e){t.value=e??""}function re(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function X(t,e,n){t.classList.toggle(e,!!n)}let ye;function se(t){ye=t}function st(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const x=[],ue=[];let ee=[];const ve=[],lt=Promise.resolve();let pe=!1;function it(){pe||(pe=!0,lt.then(Ye))}function he(t){ee.push(t)}const de=new Set;let Z=0;function Ye(){if(Z!==0)return;const t=ye;do{try{for(;Z<x.length;){const e=x[Z];Z++,se(e),rt(e.$$)}}catch(e){throw x.length=0,Z=0,e}for(se(null),x.length=0,Z=0;ue.length;)ue.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];de.has(n)||(de.add(n),n())}ee.length=0}while(x.length);for(;ve.length;)ve.pop()();pe=!1,de.clear(),se(t)}function rt(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}function ot(t){const e=[],n=[];ee.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),ee=e}const oe=new Set;let V;function z(){V={r:0,c:[],p:V}}function Y(){V.r||D(V.c),V=V.p}function _(t,e){t&&t.i&&(oe.delete(t),t.i(e))}function $(t,e,n,s){if(t&&t.o){if(oe.has(t))return;oe.add(t),V.c.push(()=>{oe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function J(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ut(t,e){$(t,1,1,()=>{e.delete(t.key)})}function at(t,e,n,s,l,i,r,u,o,a,c,f){let p=t.length,d=i.length,m=p;const w={};for(;m--;)w[t[m].key]=m;const v=[],T=new Map,y=new Map,E=[];for(m=d;m--;){const b=f(l,i,m),I=n(b);let L=r.get(I);L?s&&E.push(()=>L.p(b,e)):(L=a(I,b),L.c()),T.set(I,v[m]=L),I in w&&y.set(I,Math.abs(m-w[I]))}const j=new Set,U=new Set;function G(b){_(b,1),b.m(u,c),r.set(b.key,b),c=b.first,d--}for(;p&&d;){const b=v[d-1],I=t[p-1],L=b.key,ie=I.key;b===I?(c=b.first,p--,d--):T.has(ie)?!r.has(L)||j.has(L)?G(b):U.has(ie)?p--:y.get(L)>y.get(ie)?(U.add(L),G(b)):(j.add(ie),p--):(o(I,r),p--)}for(;p--;){const b=t[p];T.has(b.key)||o(b,r)}for(;d;)G(v[d-1]);return D(E),v}function B(t){t&&t.c()}function F(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),he(()=>{const i=t.$$.on_mount.map(Xe).filter(ae);t.$$.on_destroy?t.$$.on_destroy.push(...i):D(i),t.$$.on_mount=[]}),l.forEach(he)}function N(t,e){const n=t.$$;n.fragment!==null&&(ot(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){t.$$.dirty[0]===-1&&(x.push(t),it(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,s,l,i,r,u=[-1]){const o=ye;se(t);const a=t.$$={fragment:null,ctx:[],props:i,update:C,not_equal:l,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Ie(),dirty:u,skip_bound:!1,root:e.target||o.$$.root};r&&r(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(f,p,...d)=>{const m=d.length?d[0]:p;return a.ctx&&l(a.ctx[f],a.ctx[f]=m)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](m),c&&ct(t,f)),p}):[],a.update(),c=!0,D(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const f=nt(e.target);a.fragment&&a.fragment.l(f),f.forEach(P)}else a.fragment&&a.fragment.c();e.intro&&_(t.$$.fragment),F(t,e.target,e.anchor),Ye()}se(o)}class q{constructor(){fe(this,"$$");fe(this,"$$set")}$destroy(){N(this,1),this.$destroy=C}$on(e,n){if(!ae(n))return C;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ft);function dt(t){let e,n,s,l,i;const r=t[1].default,u=ge(r,t,t[0],null);return{c(){e=k("div"),n=k("main"),u&&u.c(),g(e,"class","app"),g(e,"role","application")},m(o,a){O(o,e,a),h(e,n),u&&u.m(n,null),s=!0,l||(i=M(e,"contextmenu",ze(t[2])),l=!0)},p(o,a){u&&u.p&&(!s||a&1)&&ke(u,r,o,o[0],s?_e(r,o[0],a,null):be(o[0]),null)},i(o){s||(_(u,o),s=!0)},o(o){$(u,o),s=!1},d(o){o&&P(e),u&&u.d(o),l=!1,i()}}}function pt(t){let e,n,s;const l=t[1].default,i=ge(l,t,t[0],null);return{c(){e=k("div"),n=k("main"),i&&i.c(),g(e,"class","app"),g(e,"role","application")},m(r,u){O(r,e,u),h(e,n),i&&i.m(n,null),s=!0},p(r,u){i&&i.p&&(!s||u&1)&&ke(i,l,r,r[0],s?_e(l,r[0],u,null):be(r[0]),null)},i(r){s||(_(i,r),s=!0)},o(r){$(i,r),s=!1},d(r){r&&P(e),i&&i.d(r)}}}function ht(t){let e,n,s,l;const i=[pt,dt],r=[];function u(o,a){return 0}return e=u(),n=r[e]=i[e](t),{c(){n.c(),s=le()},m(o,a){r[e].m(o,a),O(o,s,a),l=!0},p(o,[a]){n.p(o,a)},i(o){l||(_(n),l=!0)},o(o){$(n),l=!1},d(o){o&&P(s),r[e].d(o)}}}function mt(t,e,n){let{$$slots:s={},$$scope:l}=e;function i(r){st.call(this,t,r)}return t.$$set=r=>{"$$scope"in r&&n(0,l=r.$$scope)},[l,s,i]}class gt extends q{constructor(e){super(),R(this,e,mt,ht,K,{})}}const _t="/Tusker/assets/tusker-logo-poly-5836d0cb.png";function kt(t){let e;return{c(){e=k("span"),e.innerHTML=`<img id="logo-img" src="${_t}" alt="Tusker Logo"/> <div><h1>Tusker</h1></div>`,g(e,"id","logo-container")},m(n,s){O(n,e,s)},p:C,i:C,o:C,d(n){n&&P(e)}}}class bt extends q{constructor(e){super(),R(this,e,null,kt,K,{})}}const Q=[];function $t(t,e){return{subscribe:we(t,e).subscribe}}function we(t,e=C){let n;const s=new Set;function l(u){if(K(t,u)&&(t=u,n)){const o=!Q.length;for(const a of s)a[1](),Q.push(a,t);if(o){for(let a=0;a<Q.length;a+=2)Q[a][0](Q[a+1]);Q.length=0}}}function i(u){l(u(t))}function r(u,o=C){const a=[u,o];return s.add(a),s.size===1&&(n=e(l,i)||C),u(t),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:r}}function ce(t,e,n){const s=!Array.isArray(t),l=s?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return $t(n,(r,u)=>{let o=!1;const a=[];let c=0,f=C;const p=()=>{if(c)return;f();const m=e(s?a[0]:a,r,u);i?r(m):f=ae(m)?m:C},d=l.map((m,w)=>me(m,v=>{a[w]=v,c&=~(1<<w),o&&p()},()=>{c|=1<<w}));return o=!0,p(),function(){D(d),f(),o=!1}})}const yt=(t,e)=>{const n=window.localStorage.getItem(t);return n?JSON.parse(n):e},wt=(t,e)=>{e(n=>{window.localStorage.setItem(t,JSON.stringify(n))})},Tt=(t,e)=>{const n=yt(t,e),{subscribe:s,set:l,update:i}=we(n);return wt(t,s),{subscribe:s,set:l,update:i}},It="tusker/tasks",Pt=()=>{const{subscribe:t,set:e,update:n}=Tt(It,[]);let s=u=>u.length?Math.max(...u.map(o=>o.id))+1:0,l=(u,o)=>u.filter(a=>a.id==o)[0],i=u=>n(o=>[...o,{id:s(o),...u}]),r=(u,o)=>n(a=>a.map(c=>(c.id==u&&(c={id:u,...o(l(a,u))}),c)));return{subscribe:t,set:e,updateTask:r,toggleTaskState:(u,o)=>r(u,a=>({...a,state:o??(a.state=="Finished"?"In-Progress":"Finished")})),addTask:i,addTasks:u=>{u.forEach(i)},addTaskByTitle:u=>i({title:u,state:"In-Progress",tags:[]}),deleteTask:u=>n(o=>o.filter(a=>a.id!=u)),deleteTasks:()=>e([]),deleteFinishedTasks:()=>n(u=>u.filter(o=>o.state!="Finished"))}},A=Pt(),vt=t=>ce(A,e=>{let n=e.filter(s=>s.id==t);return n.length==1?n[0]:null}),Ot=ce(A,t=>t.filter(e=>e.state!="Finished")),St=ce(A,t=>t.filter(e=>e.state=="Finished"));let Lt="https://api.ai21.com/studio/v1/j2-ultra/complete",Mt="OA6FRXUU6lln8U1jKldXZ2jtcyaplKl0",Ct=`Your mission is to accept a task descriptions and break it down into smaller task units.
Answer with markdown and write each task in a new line.
If a task unit includes multiple logical steps or elements, break it down to separate task units.
Pay close attention to details such as targets, dates, and requirements.
Each task unit must begin with an asterisk, and then the task unit's description.
Your input is between <input-start> and <input-end>.`,Je=async t=>{let e=new Headers;e.set("Content-Type","application/json"),e.set("Authorization",`Bearer ${Mt}`);let n=JSON.stringify({prompt:`${Ct}
<input-start>${t}<input-end>`,numResults:1,epoch:0,maxTokens:400,temperature:0,topKReturn:0,topP:1,presencePenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},countPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},frequencyPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},stopSequences:[]}),s=new Request(Lt,{method:"POST",headers:e,body:n}),l=await(await fetch(s)).json();return At(l.completions[0].data.text)},At=t=>t.split(`
`).map(Et).filter(e=>!!e.trim()).map(e=>({title:e,state:"In-Progress",tags:[]})),Et=t=>t.startsWith("* ")?t.replace("* ",""):t;function Oe(t){let e,n=t[0]?"[SMART]":"[MANUAL]",s;return{c(){e=k("span"),s=W(n),g(e,"class","task-input-mode")},m(l,i){O(l,e,i),h(e,s)},p(l,i){i&1&&n!==(n=l[0]?"[SMART]":"[MANUAL]")&&H(s,n)},d(l){l&&P(e)}}}function Ft(t){let e,n,s,l,i,r,u,o,a=t[1]&&Oe(t);return{c(){e=k("div"),n=k("button"),s=k("span"),s.innerHTML='<input type="checkbox" disabled=""/>',l=S(),i=k("input"),r=S(),a&&a.c(),g(s,"class","task-item-checkbox"),g(i,"type","text"),g(i,"placeholder",t[5]),i.disabled=t[4],g(i,"class","manual-task-input-textbox"),g(n,"class","task-item"),X(n,"isFocus",t[1]),X(n,"isLoading",t[4]),g(e,"class","new-task-input")},m(c,f){O(c,e,f),h(e,n),h(n,s),h(n,l),h(n,i),Pe(i,t[3]),t[8](i),h(n,r),a&&a.m(n,null),u||(o=[M(i,"input",t[7]),M(i,"focus",t[9]),M(i,"blur",t[10]),M(n,"click",t[11]),M(n,"keydown",t[6])],u=!0)},p(c,[f]){f&32&&g(i,"placeholder",c[5]),f&16&&(i.disabled=c[4]),f&8&&i.value!==c[3]&&Pe(i,c[3]),c[1]?a?a.p(c,f):(a=Oe(c),a.c(),a.m(n,null)):a&&(a.d(1),a=null),f&2&&X(n,"isFocus",c[1]),f&16&&X(n,"isLoading",c[4])},i:C,o:C,d(c){c&&P(e),t[8](null),a&&a.d(),u=!1,D(o)}}}function Nt(t,e,n){let s,l,i,r=!1,u=!1,o=!1,a=async T=>{T.key=="Enter"&&i.trim()&&(r?(n(4,o=!0),(await Je(i)).forEach(A.addTask),n(4,o=!1)):A.addTaskByTitle(i),n(3,i=""))},c=T=>{T.ctrlKey&&T.altKey&&(T.preventDefault(),n(0,r=!r))},f=T=>{c(T),a(T)};function p(){i=this.value,n(3,i)}function d(T){ue[T?"unshift":"push"](()=>{l=T,n(2,l)})}const m=()=>n(1,u=!0),w=()=>n(1,u=!1),v=()=>l.focus();return t.$$.update=()=>{t.$$.dirty&3&&n(5,s=(r?"Describe your tasks":"Add a task		")+(u?"	(Press Ctrl+Alt to toggle input mode)":""))},[r,u,l,i,o,s,f,p,d,m,w,v]}class jt extends q{constructor(e){super(),R(this,e,Nt,Ft,K,{})}}const Bt=()=>{const{subscribe:t,set:e,update:n}=we({sidePane:{isOpen:!1,selectedTaskId:null},contextMenu:{isOpen:!1}});return{subscribe:t,toggleSidePane:s=>n(l=>s!=null&&s!=l.sidePane.selectedTaskId?{...l,sidePane:{isOpen:!0,selectedTaskId:s}}:{...l,sidePane:{isOpen:!1,selectedTaskId:null}}),toggleContextMenu:()=>n(s=>({...s,contextMenu:{isOpen:!s.contextMenu.isOpen}})),updateContextMenu:s=>n(l=>({...l,contextMenu:{isOpen:s}}))}},te=Bt();ce(te,t=>t.sidePane.isOpen);const{window:Se}=tt;function Le(t,e,n){const s=t.slice();return s[15]=e[n],s}function Me(t){let e,n,s,l,i,r=J(t[0]),u=[];for(let o=0;o<r.length;o+=1)u[o]=Ce(Le(t,r,o));return{c(){e=k("nav"),n=k("div"),s=k("ul");for(let o=0;o<u.length;o+=1)u[o].c();g(n,"class","navbar"),g(n,"id","navbar"),re(e,"top",t[3].y+"px"),re(e,"left",t[3].x+"px")},m(o,a){O(o,e,a),h(e,n),h(n,s);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(s,null);l||(i=et(t[7].call(null,e)),l=!0)},p(o,a){if(a&65){r=J(o[0]);let c;for(c=0;c<r.length;c+=1){const f=Le(o,r,c);u[c]?u[c].p(f,a):(u[c]=Ce(f),u[c].c(),u[c].m(s,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=r.length}a&8&&re(e,"top",o[3].y+"px"),a&8&&re(e,"left",o[3].x+"px")},d(o){o&&P(e),$e(u,o),l=!1,i()}}}function Ce(t){let e,n,s,l=(t[15].icon?t[15].icon:"")+"",i,r,u,o=t[15].displayText+"",a,c,f,p;function d(...m){return t[10](t[15],...m)}return{c(){e=k("li"),n=k("button"),s=k("span"),i=W(l),r=S(),u=k("span"),a=W(o),c=S(),g(s,"class","context-menu-li-icon"),g(u,"class","context-menu-li-text")},m(m,w){O(m,e,w),h(e,n),h(n,s),h(s,i),h(n,r),h(n,u),h(u,a),h(n,c),f||(p=M(n,"click",d),f=!0)},p(m,w){t=m,w&1&&l!==(l=(t[15].icon?t[15].icon:"")+"")&&H(i,l),w&1&&o!==(o=t[15].displayText+"")&&H(a,o)},d(m){m&&P(e),f=!1,p()}}}function Wt(t){let e,n,s,l,i,r=t[1]&&Me(t);const u=t[9].default,o=ge(u,t,t[8],null);return{c(){r&&r.c(),e=S(),n=k("span"),o&&o.c(),g(n,"role","superscript")},m(a,c){r&&r.m(a,c),O(a,e,c),O(a,n,c),o&&o.m(n,null),t[11](n),s=!0,l||(i=[M(Se,"click",t[6]),M(Se,"contextmenu",t[5]),M(n,"contextmenu",ze(t[4]))],l=!0)},p(a,[c]){a[1]?r?r.p(a,c):(r=Me(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),o&&o.p&&(!s||c&256)&&ke(o,u,a,a[8],s?_e(u,a[8],c,null):be(a[8]),null)},i(a){s||(_(o,a),s=!0)},o(a){$(o,a),s=!1},d(a){a&&(P(e),P(n)),r&&r.d(a),o&&o.d(a),t[11](null),l=!1,D(i)}}}function Dt(t,e,n){let{$$slots:s={},$$scope:l}=e,{menuItems:i=[]}=e,r,u={x:0,y:0},o={h:0,w:0},a={h:0,w:0},c=!1,f=y=>{n(1,c=!0),a={w:window.innerWidth,h:window.innerHeight},n(3,u={x:y.clientX+document.documentElement.scrollLeft,y:y.clientY+document.documentElement.scrollTop}),console.log(`x: ${y.clientX}, y: ${y.clientY}`),a.h-u.y<o.h&&n(3,u.y=u.y-o.h,u),a.w-u.x<o.w&&n(3,u.x=u.x-o.w,u)},p=y=>{var E,j;return r.children[0]==y?!0:(j=(E=r.children[0])==null?void 0:E.children)!=null&&j.length?[...r.children[0].children].some(U=>U==y):!1},d=y=>{var E;((E=r==null?void 0:r.children)==null?void 0:E.length)==1?n(1,c=p(y.target)):n(1,c=!1)},m=()=>{n(1,c=!1)},w=y=>{o={h:y.offsetHeight,w:y.offsetWidth}};const v=(y,E)=>{y.onClick(),E.stopPropagation(),m()};function T(y){ue[y?"unshift":"push"](()=>{r=y,n(2,r)})}return t.$$set=y=>{"menuItems"in y&&n(0,i=y.menuItems),"$$scope"in y&&n(8,l=y.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&te.updateContextMenu(c)},[i,c,r,u,f,d,m,w,l,s,v,T]}class Te extends q{constructor(e){super(),R(this,e,Dt,Wt,K,{menuItems:0})}}function Kt(t){let e,n;return{c(){e=k("div"),n=W(t[0]),g(e,"class","task-item-tag")},m(s,l){O(s,e,l),h(e,n)},p(s,l){l&1&&H(n,s[0])},d(s){s&&P(e)}}}function Rt(t){let e,n;return e=new Te({props:{menuItems:t[1],$$slots:{default:[Kt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,[l]){const i={};l&9&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function qt(t,e,n){let{value:s}=e,{taskId:l}=e,i=[{name:"deleteTag",onClick:()=>A.updateTask(l,r=>({...r,tags:r.tags.filter(u=>u!=s)})),displayText:"Delete tag",icon:"X",states:["In-Progress","Finished"]}];return t.$$set=r=>{"value"in r&&n(0,s=r.value),"taskId"in r&&n(2,l=r.taskId)},[s,i,l]}class Ve extends q{constructor(e){super(),R(this,e,qt,Rt,K,{value:0,taskId:2})}}function Ae(t,e,n){const s=t.slice();return s[8]=e[n],s}function Ee(t){let e,n,s=J(t[0].tags),l=[];for(let r=0;r<s.length;r+=1)l[r]=Fe(Ae(t,s,r));const i=r=>$(l[r],1,1,()=>{l[r]=null});return{c(){e=k("span");for(let r=0;r<l.length;r+=1)l[r].c();g(e,"class","task-item-tags")},m(r,u){O(r,e,u);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);n=!0},p(r,u){if(u&1){s=J(r[0].tags);let o;for(o=0;o<s.length;o+=1){const a=Ae(r,s,o);l[o]?(l[o].p(a,u),_(l[o],1)):(l[o]=Fe(a),l[o].c(),_(l[o],1),l[o].m(e,null))}for(z(),o=s.length;o<l.length;o+=1)i(o);Y()}},i(r){if(!n){for(let u=0;u<s.length;u+=1)_(l[u]);n=!0}},o(r){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)$(l[u]);n=!1},d(r){r&&P(e),$e(l,r)}}}function Fe(t){let e,n;return e=new Ve({props:{taskId:t[0].id,value:t[8]}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const i={};l&1&&(i.taskId=s[0].id),l&1&&(i.value=s[8]),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Ut(t){let e,n,s,l,i,r=t[0].title+"",u,o,a,c,f,p=!t[2].sidePane.isOpen&&Ee(t);return{c(){e=k("button"),n=k("span"),s=k("input"),l=S(),i=k("span"),u=W(r),o=S(),p&&p.c(),g(s,"type","checkbox"),g(n,"class","task-item-checkbox"),g(i,"class","task-item-title"),g(e,"class","task-item"),X(e,"isFinished",t[1])},m(d,m){O(d,e,m),h(e,n),h(n,s),s.checked=t[1],h(e,l),h(e,i),h(i,u),h(e,o),p&&p.m(e,null),a=!0,c||(f=[M(s,"change",t[4]),M(s,"click",t[5]),M(e,"click",t[6])],c=!0)},p(d,m){m&2&&(s.checked=d[1]),(!a||m&1)&&r!==(r=d[0].title+"")&&H(u,r),d[2].sidePane.isOpen?p&&(z(),$(p,1,1,()=>{p=null}),Y()):p?(p.p(d,m),m&4&&_(p,1)):(p=Ee(d),p.c(),_(p,1),p.m(e,null)),(!a||m&2)&&X(e,"isFinished",d[1])},i(d){a||(_(p),a=!0)},o(d){$(p),a=!1},d(d){d&&P(e),p&&p.d(),c=!1,D(f)}}}function Xt(t){let e,n;return e=new Te({props:{menuItems:t[3].filter(t[7]),$$slots:{default:[Ut]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,[l]){const i={};l&1&&(i.menuItems=s[3].filter(s[7])),l&2055&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Ht(t,e,n){let s,l;ne(t,te,f=>n(2,l=f));let{task:i}=e,r=[{name:"toggleTask",onClick:()=>A.toggleTaskState(i.id,"In-Progress"),displayText:"Mark as not finished",icon:"⍻",states:["Finished"]},{name:"toggleTask",onClick:()=>A.toggleTaskState(i.id,"Finished"),displayText:"Mark as finished",icon:"✓",states:["In-Progress"]},{name:"breakdownTask",onClick:async()=>{(await Je(i.title)).forEach(A.addTask),A.deleteTask(i.id)},displayText:"Breakdown",icon:"☄",states:["In-Progress"]},{name:"deleteTask",onClick:()=>A.deleteTask(i.id),displayText:"Delete task",icon:"X",states:["In-Progress","Finished"]}];function u(){s=this.checked,n(1,s),n(0,i)}const o=()=>A.toggleTaskState(i.id),a=()=>te.toggleSidePane(i.id),c=f=>f.states.includes(i.state);return t.$$set=f=>{"task"in f&&n(0,i=f.task)},t.$$.update=()=>{t.$$.dirty&1&&n(1,s=i.state=="Finished")},[i,s,l,r,u,o,a,c]}class zt extends q{constructor(e){super(),R(this,e,Ht,Xt,K,{task:0})}}function Ne(t,e,n){const s=t.slice();return s[5]=e[n],s}function je(t){let e,n;return e=new Te({props:{menuItems:t[3],$$slots:{default:[Yt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const i={};l&263&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Yt(t){let e,n,s,l,i,r,u=t[0].length+"",o,a,c,f;return{c(){e=k("button"),n=k("span"),n.textContent="▶",s=S(),l=k("span"),i=W(t[1]),r=W(" ("),o=W(u),a=W(")"),g(n,"class","task-list-button-triangle"),X(n,"showTasks",t[2]),g(l,"class","task-list-button-text"),g(e,"class","task-list-button")},m(p,d){O(p,e,d),h(e,n),h(e,s),h(e,l),h(l,i),h(l,r),h(l,o),h(l,a),c||(f=M(e,"click",t[4]),c=!0)},p(p,d){d&4&&X(n,"showTasks",p[2]),d&2&&H(i,p[1]),d&1&&u!==(u=p[0].length+"")&&H(o,u)},d(p){p&&P(e),c=!1,f()}}}function Be(t){let e=[],n=new Map,s,l,i=J(t[0]);const r=u=>u[5].id;for(let u=0;u<i.length;u+=1){let o=Ne(t,i,u),a=r(o);n.set(a,e[u]=We(a,o))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=le()},m(u,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(u,o);O(u,s,o),l=!0},p(u,o){o&1&&(i=J(u[0]),z(),e=at(e,o,r,1,u,i,n,s.parentNode,ut,We,s,Ne),Y())},i(u){if(!l){for(let o=0;o<i.length;o+=1)_(e[o]);l=!0}},o(u){for(let o=0;o<e.length;o+=1)$(e[o]);l=!1},d(u){u&&P(s);for(let o=0;o<e.length;o+=1)e[o].d(u)}}}function We(t,e){let n,s,l;return s=new zt({props:{task:e[5]}}),{key:t,first:null,c(){n=le(),B(s.$$.fragment),this.first=n},m(i,r){O(i,n,r),F(s,i,r),l=!0},p(i,r){e=i;const u={};r&1&&(u.task=e[5]),s.$set(u)},i(i){l||(_(s.$$.fragment,i),l=!0)},o(i){$(s.$$.fragment,i),l=!1},d(i){i&&P(n),N(s,i)}}}function Jt(t){let e,n,s,l=!!t[1]&&t[0].length&&je(t),i=t[2]&&Be(t);return{c(){e=k("div"),l&&l.c(),n=S(),i&&i.c(),g(e,"class","task-list")},m(r,u){O(r,e,u),l&&l.m(e,null),h(e,n),i&&i.m(e,null),s=!0},p(r,[u]){r[1]&&r[0].length?l?(l.p(r,u),u&3&&_(l,1)):(l=je(r),l.c(),_(l,1),l.m(e,n)):l&&(z(),$(l,1,1,()=>{l=null}),Y()),r[2]?i?(i.p(r,u),u&4&&_(i,1)):(i=Be(r),i.c(),_(i,1),i.m(e,null)):i&&(z(),$(i,1,1,()=>{i=null}),Y())},i(r){s||(_(l),_(i),s=!0)},o(r){$(l),$(i),s=!1},d(r){r&&P(e),l&&l.d(),i&&i.d()}}}function Vt(t,e,n){let{taskList:s}=e,{category:l=void 0}=e,i=!0;const r=[{name:"deleteAll",displayText:"Delete tasks",onClick:()=>s.forEach(o=>A.deleteTask(o.id)),icon:"X"}],u=()=>n(2,i=!i);return t.$$set=o=>{"taskList"in o&&n(0,s=o.taskList),"category"in o&&n(1,l=o.category)},[s,l,i,r,u]}class De extends q{constructor(e){super(),R(this,e,Vt,Jt,K,{taskList:0,category:1})}}function Ke(t,e,n){const s=t.slice();return s[5]=e[n],s}function Re(t){let e,n,s,l=t[2].title+"",i,r,u,o,a,c,f,p,d,m,w,v,T,y,E,j,U,G,b=t[2].tags.length>=0&&qe(t);return{c(){e=k("div"),n=k("div"),s=k("span"),i=W(l),r=S(),u=k("hr"),o=S(),a=k("span"),b&&b.c(),c=S(),f=k("input"),p=S(),d=k("hr"),m=S(),w=k("span"),v=k("input"),y=S(),E=k("hr"),g(s,"id","side-panel-title"),g(f,"type","text"),g(f,"placeholder","Add tags"),g(a,"id","side-panel-tags"),g(v,"type","text"),g(v,"placeholder","Add a description"),v.value=T=t[2].description?t[2].description:null,g(w,"id","side-panel-description"),g(n,"id","side-panel-container"),g(e,"id","task-side-pane")},m(I,L){O(I,e,L),h(e,n),h(n,s),h(s,i),h(n,r),h(n,u),h(n,o),h(n,a),b&&b.m(a,null),h(a,c),h(a,f),h(n,p),h(n,d),h(n,m),h(n,w),h(w,v),h(n,y),h(n,E),j=!0,U||(G=[M(f,"change",t[3]),M(v,"change",t[4])],U=!0)},p(I,L){(!j||L&4)&&l!==(l=I[2].title+"")&&H(i,l),I[2].tags.length>=0?b?(b.p(I,L),L&4&&_(b,1)):(b=qe(I),b.c(),_(b,1),b.m(a,c)):b&&(z(),$(b,1,1,()=>{b=null}),Y()),(!j||L&4&&T!==(T=I[2].description?I[2].description:null)&&v.value!==T)&&(v.value=T)},i(I){j||(_(b),j=!0)},o(I){$(b),j=!1},d(I){I&&P(e),b&&b.d(),U=!1,D(G)}}}function qe(t){let e,n,s=J(t[2].tags),l=[];for(let r=0;r<s.length;r+=1)l[r]=Ue(Ke(t,s,r));const i=r=>$(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=le()},m(r,u){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,u);O(r,e,u),n=!0},p(r,u){if(u&4){s=J(r[2].tags);let o;for(o=0;o<s.length;o+=1){const a=Ke(r,s,o);l[o]?(l[o].p(a,u),_(l[o],1)):(l[o]=Ue(a),l[o].c(),_(l[o],1),l[o].m(e.parentNode,e))}for(z(),o=s.length;o<l.length;o+=1)i(o);Y()}},i(r){if(!n){for(let u=0;u<s.length;u+=1)_(l[u]);n=!0}},o(r){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)$(l[u]);n=!1},d(r){r&&P(e),$e(l,r)}}}function Ue(t){let e,n;return e=new Ve({props:{taskId:t[2].id,value:t[5]}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const i={};l&4&&(i.taskId=s[2].id),l&4&&(i.value=s[5]),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Gt(t){let e,n,s=t[0].sidePane.isOpen&&t[2]!=null&&Re(t);return{c(){s&&s.c(),e=le()},m(l,i){s&&s.m(l,i),O(l,e,i),n=!0},p(l,[i]){l[0].sidePane.isOpen&&l[2]!=null?s?(s.p(l,i),i&5&&_(s,1)):(s=Re(l),s.c(),_(s,1),s.m(e.parentNode,e)):s&&(z(),$(s,1,1,()=>{s=null}),Y())},i(l){n||(_(s),n=!0)},o(l){$(s),n=!1},d(l){l&&P(e),s&&s.d(l)}}}function Zt(t,e,n){let s,l,i,r=C,u=()=>(r(),r=me(s,c=>n(2,i=c)),s);ne(t,te,c=>n(0,l=c)),t.$$.on_destroy.push(()=>r());const o=c=>i!=null&&A.updateTask(i.id,f=>{let p={...f,tags:[...f.tags,...c.currentTarget.value.split(" ")]};return c.currentTarget.value="",p}),a=c=>i!=null&&A.updateTask(i.id,f=>({...f,description:c.currentTarget.value}));return t.$$.update=()=>{t.$$.dirty&1&&u(n(1,s=l.sidePane.selectedTaskId!=null?vt(l.sidePane.selectedTaskId):null))},[l,s,i,o,a]}class Qt extends q{constructor(e){super(),R(this,e,Zt,Gt,K,{})}}function xt(t){let e,n,s,l,i,r,u,o,a,c,f,p;return n=new bt({}),l=new jt({}),r=new De({props:{category:"In-Progress",taskList:t[1]}}),o=new De({props:{category:"Finished",taskList:t[2]}}),f=new Qt({}),{c(){e=k("div"),B(n.$$.fragment),s=S(),B(l.$$.fragment),i=S(),B(r.$$.fragment),u=S(),B(o.$$.fragment),c=S(),B(f.$$.fragment),g(e,"id","main-panel"),g(e,"style",a=`width: ${t[0].sidePane.isOpen?"55%":"95%"}`)},m(d,m){O(d,e,m),F(n,e,null),h(e,s),F(l,e,null),h(e,i),F(r,e,null),h(e,u),F(o,e,null),O(d,c,m),F(f,d,m),p=!0},p(d,m){const w={};m&2&&(w.taskList=d[1]),r.$set(w);const v={};m&4&&(v.taskList=d[2]),o.$set(v),(!p||m&1&&a!==(a=`width: ${d[0].sidePane.isOpen?"55%":"95%"}`))&&g(e,"style",a)},i(d){p||(_(n.$$.fragment,d),_(l.$$.fragment,d),_(r.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),p=!0)},o(d){$(n.$$.fragment,d),$(l.$$.fragment,d),$(r.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),p=!1},d(d){d&&(P(e),P(c)),N(n),N(l),N(r),N(o),N(f,d)}}}function en(t){let e,n;return e=new gt({props:{$$slots:{default:[xt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,[l]){const i={};l&15&&(i.$$scope={dirty:l,ctx:s}),e.$set(i)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function tn(t,e,n){let s,l,i;return ne(t,te,r=>n(0,s=r)),ne(t,Ot,r=>n(1,l=r)),ne(t,St,r=>n(2,i=r)),[s,l,i]}class nn extends q{constructor(e){super(),R(this,e,tn,en,K,{})}}new nn({target:document.body});
