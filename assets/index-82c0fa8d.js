var Ze=Object.defineProperty;var Ge=(t,e,n)=>e in t?Ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>(Ge(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function O(){}function Qe(t,e){for(const n in e)t[n]=e[n];return t}function De(t){return t()}function we(){return Object.create(null)}function W(t){t.forEach(De)}function le(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xe(t){return Object.keys(t).length===0}function Ue(t,...e){if(t==null){for(const s of e)s(void 0);return O}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ee(t,e,n){t.$$.on_destroy.push(Ue(e,n))}function he(t,e,n,s){if(t){const l=He(t,e,n,s);return t[0](l)}}function He(t,e,n,s){return t[1]&&s?Qe(n.ctx.slice(),t[1](s(e))):n.ctx}function me(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const r=[],o=Math.max(e.dirty.length,l.length);for(let u=0;u<o;u+=1)r[u]=e.dirty[u]|l[u];return r}return e.dirty|l}return e.dirty}function ge(t,e,n,s,l,r){if(l){const o=He(e,n,s,r);t.p(o,l)}}function _e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function et(t){return t&&le(t.destroy)?t.destroy:O}const tt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function h(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function ke(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function F(t){return document.createTextNode(t)}function I(){return F(" ")}function ie(){return F("")}function M(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Xe(t){return function(e){return e.preventDefault(),t.call(this,e)}}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nt(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function Te(t,e){t.value=e??""}function oe(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function U(t,e,n){t.classList.toggle(e,!!n)}let be;function ne(t){be=t}function st(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const x=[],ae=[];let te=[];const ve=[],lt=Promise.resolve();let de=!1;function it(){de||(de=!0,lt.then(ze))}function pe(t){te.push(t)}const fe=new Set;let G=0;function ze(){if(G!==0)return;const t=be;do{try{for(;G<x.length;){const e=x[G];G++,ne(e),rt(e.$$)}}catch(e){throw x.length=0,G=0,e}for(ne(null),x.length=0,G=0;ae.length;)ae.pop()();for(let e=0;e<te.length;e+=1){const n=te[e];fe.has(n)||(fe.add(n),n())}te.length=0}while(x.length);for(;ve.length;)ve.pop()();de=!1,fe.clear(),ne(t)}function rt(t){if(t.fragment!==null){t.update(),W(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pe)}}function ot(t){const e=[],n=[];te.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),te=e}const ue=new Set;let Y;function X(){Y={r:0,c:[],p:Y}}function z(){Y.r||W(Y.c),Y=Y.p}function b(t,e){t&&t.i&&(ue.delete(t),t.i(e))}function y(t,e,n,s){if(t&&t.o){if(ue.has(t))return;ue.add(t),Y.c.push(()=>{ue.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function J(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ut(t,e){y(t,1,1,()=>{e.delete(t.key)})}function at(t,e,n,s,l,r,o,u,i,a,c,d){let p=t.length,f=r.length,m=p;const S={};for(;m--;)S[t[m].key]=m;const v=[],g=new Map,A=new Map,D=[];for(m=f;m--;){const $=d(l,r,m),w=n($);let L=o.get(w);L?s&&D.push(()=>L.p($,e)):(L=a(w,$),L.c()),g.set(w,v[m]=L),w in S&&A.set(w,Math.abs(m-S[w]))}const j=new Set,V=new Set;function Z($){b($,1),$.m(u,c),o.set($.key,$),c=$.first,f--}for(;p&&f;){const $=v[f-1],w=t[p-1],L=$.key,re=w.key;$===w?(c=$.first,p--,f--):g.has(re)?!o.has(L)||j.has(L)?Z($):V.has(re)?p--:A.get(L)>A.get(re)?(V.add(L),Z($)):(j.add(re),p--):(i(w,o),p--)}for(;p--;){const $=t[p];g.has($.key)||i($,o)}for(;f;)Z(v[f-1]);return W(D),v}function B(t){t&&t.c()}function E(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),pe(()=>{const r=t.$$.on_mount.map(De).filter(le);t.$$.on_destroy?t.$$.on_destroy.push(...r):W(r),t.$$.on_mount=[]}),l.forEach(pe)}function N(t,e){const n=t.$$;n.fragment!==null&&(ot(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){t.$$.dirty[0]===-1&&(x.push(t),it(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,s,l,r,o,u=[-1]){const i=be;ne(t);const a=t.$$={fragment:null,ctx:[],props:r,update:O,not_equal:l,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:we(),dirty:u,skip_bound:!1,root:e.target||i.$$.root};o&&o(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(d,p,...f)=>{const m=f.length?f[0]:p;return a.ctx&&l(a.ctx[d],a.ctx[d]=m)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](m),c&&ct(t,d)),p}):[],a.update(),c=!0,W(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const d=nt(e.target);a.fragment&&a.fragment.l(d),d.forEach(T)}else a.fragment&&a.fragment.c();e.intro&&b(t.$$.fragment),E(t,e.target,e.anchor),ze()}ne(i)}class q{constructor(){ce(this,"$$");ce(this,"$$set")}$destroy(){N(this,1),this.$destroy=O}$on(e,n){if(!le(n))return O;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ft);function dt(t){let e,n,s,l,r;const o=t[1].default,u=he(o,t,t[0],null);return{c(){e=k("div"),n=k("main"),u&&u.c(),_(e,"class","app"),_(e,"role","application")},m(i,a){P(i,e,a),h(e,n),u&&u.m(n,null),s=!0,l||(r=M(e,"contextmenu",Xe(t[2])),l=!0)},p(i,a){u&&u.p&&(!s||a&1)&&ge(u,o,i,i[0],s?me(o,i[0],a,null):_e(i[0]),null)},i(i){s||(b(u,i),s=!0)},o(i){y(u,i),s=!1},d(i){i&&T(e),u&&u.d(i),l=!1,r()}}}function pt(t){let e,n,s;const l=t[1].default,r=he(l,t,t[0],null);return{c(){e=k("div"),n=k("main"),r&&r.c(),_(e,"class","app"),_(e,"role","application")},m(o,u){P(o,e,u),h(e,n),r&&r.m(n,null),s=!0},p(o,u){r&&r.p&&(!s||u&1)&&ge(r,l,o,o[0],s?me(l,o[0],u,null):_e(o[0]),null)},i(o){s||(b(r,o),s=!0)},o(o){y(r,o),s=!1},d(o){o&&T(e),r&&r.d(o)}}}function ht(t){let e,n,s,l;const r=[pt,dt],o=[];function u(i,a){return 0}return e=u(),n=o[e]=r[e](t),{c(){n.c(),s=ie()},m(i,a){o[e].m(i,a),P(i,s,a),l=!0},p(i,[a]){n.p(i,a)},i(i){l||(b(n),l=!0)},o(i){y(n),l=!1},d(i){i&&T(s),o[e].d(i)}}}function mt(t,e,n){let{$$slots:s={},$$scope:l}=e;function r(o){st.call(this,t,o)}return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,s,r]}class gt extends q{constructor(e){super(),R(this,e,mt,ht,K,{})}}const _t="/Tusker/assets/tusker-logo-poly-5836d0cb.png";function kt(t){let e;return{c(){e=k("span"),e.innerHTML=`<img id="logo-img" src="${_t}" alt="Tusker Logo"/> <div><h1>Tusker</h1></div>`,_(e,"id","logo-container")},m(n,s){P(n,e,s)},p:O,i:O,o:O,d(n){n&&T(e)}}}class bt extends q{constructor(e){super(),R(this,e,null,kt,K,{})}}const Q=[];function $t(t,e){return{subscribe:$e(t,e).subscribe}}function $e(t,e=O){let n;const s=new Set;function l(u){if(K(t,u)&&(t=u,n)){const i=!Q.length;for(const a of s)a[1](),Q.push(a,t);if(i){for(let a=0;a<Q.length;a+=2)Q[a][0](Q[a+1]);Q.length=0}}}function r(u){l(u(t))}function o(u,i=O){const a=[u,i];return s.add(a),s.size===1&&(n=e(l,r)||O),u(t),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:l,update:r,subscribe:o}}function ye(t,e,n){const s=!Array.isArray(t),l=s?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return $t(n,(o,u)=>{let i=!1;const a=[];let c=0,d=O;const p=()=>{if(c)return;d();const m=e(s?a[0]:a,o,u);r?o(m):d=le(m)?m:O},f=l.map((m,S)=>Ue(m,v=>{a[S]=v,c&=~(1<<S),i&&p()},()=>{c|=1<<S}));return i=!0,p(),function(){W(f),d(),i=!1}})}const yt=(t,e)=>{const n=window.localStorage.getItem(t);return n?JSON.parse(n):e},wt=(t,e)=>{e(n=>{window.localStorage.setItem(t,JSON.stringify(n))})},Tt=(t,e)=>{const n=yt(t,e),{subscribe:s,set:l,update:r}=$e(n);return wt(t,s),{subscribe:s,set:l,update:r}},vt="tusker/tasks",Pt=()=>{const{subscribe:t,set:e,update:n}=Tt(vt,[]);let s=u=>u.length?Math.max(...u.map(i=>i.id))+1:0,l=(u,i)=>u.filter(a=>a.id==i)[0],r=u=>n(i=>[...i,{id:s(i),...u}]),o=(u,i)=>n(a=>a.map(c=>(c.id==u&&(c={id:u,...i(l(a,u))}),c)));return{subscribe:t,set:e,updateTask:o,toggleTaskState:(u,i)=>o(u,a=>({...a,state:i??(a.state=="Finished"?"In-Progress":"Finished")})),addTask:r,addTasks:u=>{u.forEach(r)},addTaskByTitle:u=>r({title:u,state:"In-Progress",tags:[]}),deleteTask:u=>n(i=>i.filter(a=>a.id!=u)),deleteTasks:()=>e([]),deleteFinishedTasks:()=>n(u=>u.filter(i=>i.state!="Finished"))}},C=Pt(),St=ye(C,t=>t.filter(e=>e.state!="Finished")),It=ye(C,t=>t.filter(e=>e.state=="Finished"));let Lt="https://api.ai21.com/studio/v1/j2-ultra/complete",Ot="OA6FRXUU6lln8U1jKldXZ2jtcyaplKl0",Mt=`Your mission is to accept a task descriptions and break it down into smaller task units.
Answer with markdown and write each task in a new line.
If a task unit includes multiple logical steps or elements, break it down to separate task units.
Pay close attention to details such as targets, dates, and requirements.
Each task unit must begin with an asterisk, and then the task unit's description.
Your input is between <input-start> and <input-end>.`,Je=async t=>{let e=new Headers;e.set("Content-Type","application/json"),e.set("Authorization",`Bearer ${Ot}`);let n=JSON.stringify({prompt:`${Mt}
<input-start>${t}<input-end>`,numResults:1,epoch:0,maxTokens:400,temperature:0,topKReturn:0,topP:1,presencePenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},countPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},frequencyPenalty:{scale:0,applyToNumbers:!0,applyToPunctuations:!0,applyToStopwords:!0,applyToWhitespaces:!0,applyToEmojis:!0},stopSequences:[]}),s=new Request(Lt,{method:"POST",headers:e,body:n}),l=await(await fetch(s)).json();return Ct(l.completions[0].data.text)},Ct=t=>t.split(`
`).map(At).filter(e=>!!e.trim()).map(e=>({title:e,state:"In-Progress",tags:[]})),At=t=>t.startsWith("* ")?t.replace("* ",""):t;function Pe(t){let e,n=t[0]?"[SMART]":"[MANUAL]",s;return{c(){e=k("span"),s=F(n),_(e,"class","task-input-mode")},m(l,r){P(l,e,r),h(e,s)},p(l,r){r&1&&n!==(n=l[0]?"[SMART]":"[MANUAL]")&&H(s,n)},d(l){l&&T(e)}}}function Et(t){let e,n,s,l,r,o,u,i,a=t[1]&&Pe(t);return{c(){e=k("div"),n=k("button"),s=k("span"),s.innerHTML='<input type="checkbox" disabled=""/>',l=I(),r=k("input"),o=I(),a&&a.c(),_(s,"class","task-item-checkbox"),_(r,"type","text"),_(r,"placeholder",t[5]),r.disabled=t[4],_(r,"class","manual-task-input-textbox"),_(n,"class","task-item"),U(n,"isFocus",t[1]),U(n,"isLoading",t[4]),_(e,"class","new-task-input")},m(c,d){P(c,e,d),h(e,n),h(n,s),h(n,l),h(n,r),Te(r,t[3]),t[8](r),h(n,o),a&&a.m(n,null),u||(i=[M(r,"input",t[7]),M(r,"focus",t[9]),M(r,"blur",t[10]),M(n,"click",t[11]),M(n,"keydown",t[6])],u=!0)},p(c,[d]){d&32&&_(r,"placeholder",c[5]),d&16&&(r.disabled=c[4]),d&8&&r.value!==c[3]&&Te(r,c[3]),c[1]?a?a.p(c,d):(a=Pe(c),a.c(),a.m(n,null)):a&&(a.d(1),a=null),d&2&&U(n,"isFocus",c[1]),d&16&&U(n,"isLoading",c[4])},i:O,o:O,d(c){c&&T(e),t[8](null),a&&a.d(),u=!1,W(i)}}}function Nt(t,e,n){let s,l,r,o=!1,u=!1,i=!1,a=async g=>{g.key=="Enter"&&r.trim()&&(o?(n(4,i=!0),(await Je(r)).forEach(C.addTask),n(4,i=!1)):C.addTaskByTitle(r),n(3,r=""))},c=g=>{g.ctrlKey&&g.altKey&&(g.preventDefault(),n(0,o=!o))},d=g=>{c(g),a(g)};function p(){r=this.value,n(3,r)}function f(g){ae[g?"unshift":"push"](()=>{l=g,n(2,l)})}const m=()=>n(1,u=!0),S=()=>n(1,u=!1),v=()=>l.focus();return t.$$.update=()=>{t.$$.dirty&3&&n(5,s=(o?"Describe your tasks":"Add a task		")+(u?"	(Press Ctrl+Alt to toggle input mode)":""))},[o,u,l,r,i,s,d,p,f,m,S,v]}class Ft extends q{constructor(e){super(),R(this,e,Nt,Et,K,{})}}const{window:Se}=tt;function Ie(t,e,n){const s=t.slice();return s[14]=e[n],s}function Le(t){let e,n,s,l,r,o=J(t[0]),u=[];for(let i=0;i<o.length;i+=1)u[i]=Oe(Ie(t,o,i));return{c(){e=k("nav"),n=k("div"),s=k("ul");for(let i=0;i<u.length;i+=1)u[i].c();_(n,"class","navbar"),_(n,"id","navbar"),oe(e,"top",t[2].y+"px"),oe(e,"left",t[2].x+"px")},m(i,a){P(i,e,a),h(e,n),h(n,s);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(s,null);l||(r=et(t[7].call(null,e)),l=!0)},p(i,a){if(a&1){o=J(i[0]);let c;for(c=0;c<o.length;c+=1){const d=Ie(i,o,c);u[c]?u[c].p(d,a):(u[c]=Oe(d),u[c].c(),u[c].m(s,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=o.length}a&4&&oe(e,"top",i[2].y+"px"),a&4&&oe(e,"left",i[2].x+"px")},d(i){i&&T(e),ke(u,i),l=!1,r()}}}function Oe(t){let e,n,s,l=(t[14].icon?t[14].icon:"")+"",r,o,u,i=t[14].displayText+"",a,c,d,p;return{c(){e=k("li"),n=k("button"),s=k("span"),r=F(l),o=I(),u=k("span"),a=F(i),c=I(),_(s,"class","context-menu-li-icon"),_(u,"class","context-menu-li-text")},m(f,m){P(f,e,m),h(e,n),h(n,s),h(s,r),h(n,o),h(n,u),h(u,a),h(n,c),d||(p=M(n,"click",function(){le(t[14].onClick)&&t[14].onClick.apply(this,arguments)}),d=!0)},p(f,m){t=f,m&1&&l!==(l=(t[14].icon?t[14].icon:"")+"")&&H(r,l),m&1&&i!==(i=t[14].displayText+"")&&H(a,i)},d(f){f&&T(e),d=!1,p()}}}function jt(t){let e,n,s,l,r,o=t[3]&&Le(t);const u=t[9].default,i=he(u,t,t[8],null);return{c(){o&&o.c(),e=I(),n=k("span"),i&&i.c(),_(n,"role","superscript")},m(a,c){o&&o.m(a,c),P(a,e,c),P(a,n,c),i&&i.m(n,null),t[10](n),s=!0,l||(r=[M(Se,"click",t[6]),M(Se,"contextmenu",t[5]),M(n,"contextmenu",Xe(t[4]))],l=!0)},p(a,[c]){a[3]?o?o.p(a,c):(o=Le(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),i&&i.p&&(!s||c&256)&&ge(i,u,a,a[8],s?me(u,a[8],c,null):_e(a[8]),null)},i(a){s||(b(i,a),s=!0)},o(a){y(i,a),s=!1},d(a){a&&(T(e),T(n)),o&&o.d(a),i&&i.d(a),t[10](null),l=!1,W(r)}}}function Bt(t,e,n){let{$$slots:s={},$$scope:l}=e,{menuItems:r=[]}=e,o,u={x:0,y:0},i={h:0,w:0},a={h:0,w:0},c=!1,d=g=>{n(3,c=!0),a={w:window.innerWidth,h:window.innerHeight},n(2,u={x:g.clientX+document.documentElement.scrollLeft,y:g.clientY+document.documentElement.scrollTop}),a.h-u.y<i.h&&n(2,u.y=u.y-i.h,u),a.w-u.x<i.w&&n(2,u.x=u.x-i.w,u)},p=g=>{var A,D;return o.children[0]==g?!0:(D=(A=o.children[0])==null?void 0:A.children)!=null&&D.length?[...o.children[0].children].some(j=>j==g):!1},f=g=>{var A;((A=o==null?void 0:o.children)==null?void 0:A.length)==1?n(3,c=p(g.target)):n(3,c=!1)},m=g=>{n(3,c=!1)},S=g=>{i={h:g.offsetHeight,w:g.offsetWidth}};function v(g){ae[g?"unshift":"push"](()=>{o=g,n(1,o)})}return t.$$set=g=>{"menuItems"in g&&n(0,r=g.menuItems),"$$scope"in g&&n(8,l=g.$$scope)},[r,o,u,c,d,f,m,S,l,s,v]}class Ye extends q{constructor(e){super(),R(this,e,Bt,jt,K,{menuItems:0})}}function Wt(t){let e,n;return{c(){e=k("div"),n=F(t[0]),_(e,"class","task-item-tag")},m(s,l){P(s,e,l),h(e,n)},p(s,[l]){l&1&&H(n,s[0])},i:O,o:O,d(s){s&&T(e)}}}function Kt(t,e,n){let{value:s}=e;return t.$$set=l=>{"value"in l&&n(0,s=l.value)},[s]}class Ve extends q{constructor(e){super(),R(this,e,Kt,Wt,K,{value:0})}}const Rt=()=>{const{subscribe:t,set:e,update:n}=$e({isOpen:!1,selectedTaskId:null});return{subscribe:t,toggleSidePane:s=>n(l=>s!=null&&s!=l.selectedTaskId?{isOpen:!0,selectedTaskId:s}:{isOpen:!1,selectedTaskId:null})}},se=Rt();ye(se,t=>t.isOpen);function Me(t,e,n){const s=t.slice();return s[8]=e[n],s}function Ce(t){let e,n,s=J(t[0].tags),l=[];for(let o=0;o<s.length;o+=1)l[o]=Ae(Me(t,s,o));const r=o=>y(l[o],1,1,()=>{l[o]=null});return{c(){e=k("span");for(let o=0;o<l.length;o+=1)l[o].c();_(e,"class","task-item-tags")},m(o,u){P(o,e,u);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(o,u){if(u&1){s=J(o[0].tags);let i;for(i=0;i<s.length;i+=1){const a=Me(o,s,i);l[i]?(l[i].p(a,u),b(l[i],1)):(l[i]=Ae(a),l[i].c(),b(l[i],1),l[i].m(e,null))}for(X(),i=s.length;i<l.length;i+=1)r(i);z()}},i(o){if(!n){for(let u=0;u<s.length;u+=1)b(l[u]);n=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)y(l[u]);n=!1},d(o){o&&T(e),ke(l,o)}}}function Ae(t){let e,n;return e=new Ve({props:{value:t[8]}}),{c(){B(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,l){const r={};l&1&&(r.value=s[8]),e.$set(r)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function qt(t){let e,n,s,l,r,o=t[0].title+"",u,i,a,c,d,p=!t[2].isOpen&&Ce(t);return{c(){e=k("button"),n=k("span"),s=k("input"),l=I(),r=k("span"),u=F(o),i=I(),p&&p.c(),_(s,"type","checkbox"),_(n,"class","task-item-checkbox"),_(r,"class","task-item-title"),_(e,"class","task-item"),U(e,"isFinished",t[1])},m(f,m){P(f,e,m),h(e,n),h(n,s),s.checked=t[1],h(e,l),h(e,r),h(r,u),h(e,i),p&&p.m(e,null),a=!0,c||(d=[M(s,"change",t[4]),M(s,"click",t[5]),M(e,"click",t[6])],c=!0)},p(f,m){m&2&&(s.checked=f[1]),(!a||m&1)&&o!==(o=f[0].title+"")&&H(u,o),f[2].isOpen?p&&(X(),y(p,1,1,()=>{p=null}),z()):p?(p.p(f,m),m&4&&b(p,1)):(p=Ce(f),p.c(),b(p,1),p.m(e,null)),(!a||m&2)&&U(e,"isFinished",f[1])},i(f){a||(b(p),a=!0)},o(f){y(p),a=!1},d(f){f&&T(e),p&&p.d(),c=!1,W(d)}}}function Dt(t){let e,n;return e=new Ye({props:{menuItems:t[3].filter(t[7]),$$slots:{default:[qt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,[l]){const r={};l&1&&(r.menuItems=s[3].filter(s[7])),l&2055&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Ut(t,e,n){let s,l;ee(t,se,d=>n(2,l=d));let{task:r}=e,o=[{name:"toggleTask",onClick:()=>C.toggleTaskState(r.id,"In-Progress"),displayText:"Mark as not finished",icon:"⍻",states:["Finished"]},{name:"toggleTask",onClick:()=>C.toggleTaskState(r.id,"Finished"),displayText:"Mark as finished",icon:"✓",states:["In-Progress"]},{name:"breakdownTask",onClick:async()=>{(await Je(r.title)).forEach(C.addTask),C.deleteTask(r.id)},displayText:"Breakdown",icon:"☄",states:["In-Progress"]},{name:"deleteTask",onClick:()=>C.deleteTask(r.id),displayText:"Delete task",icon:"X",states:["In-Progress","Finished"]}];function u(){s=this.checked,n(1,s),n(0,r)}const i=()=>C.toggleTaskState(r.id),a=()=>se.toggleSidePane(r.id),c=d=>d.states.includes(r.state);return t.$$set=d=>{"task"in d&&n(0,r=d.task)},t.$$.update=()=>{t.$$.dirty&1&&n(1,s=r.state=="Finished")},[r,s,l,o,u,i,a,c]}class Ht extends q{constructor(e){super(),R(this,e,Ut,Dt,K,{task:0})}}function Ee(t,e,n){const s=t.slice();return s[5]=e[n],s}function Ne(t){let e,n;return e=new Ye({props:{menuItems:t[3],$$slots:{default:[Xt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,l){const r={};l&263&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Xt(t){let e,n,s,l,r,o,u=t[0].length+"",i,a,c,d;return{c(){e=k("button"),n=k("span"),n.textContent="▶",s=I(),l=k("span"),r=F(t[1]),o=F(" ("),i=F(u),a=F(")"),_(n,"class","task-list-button-triangle"),U(n,"showTasks",t[2]),_(l,"class","task-list-button-text"),_(e,"class","task-list-button")},m(p,f){P(p,e,f),h(e,n),h(e,s),h(e,l),h(l,r),h(l,o),h(l,i),h(l,a),c||(d=M(e,"click",t[4]),c=!0)},p(p,f){f&4&&U(n,"showTasks",p[2]),f&2&&H(r,p[1]),f&1&&u!==(u=p[0].length+"")&&H(i,u)},d(p){p&&T(e),c=!1,d()}}}function Fe(t){let e=[],n=new Map,s,l,r=J(t[0]);const o=u=>u[5].id;for(let u=0;u<r.length;u+=1){let i=Ee(t,r,u),a=o(i);n.set(a,e[u]=je(a,i))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=ie()},m(u,i){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(u,i);P(u,s,i),l=!0},p(u,i){i&1&&(r=J(u[0]),X(),e=at(e,i,o,1,u,r,n,s.parentNode,ut,je,s,Ee),z())},i(u){if(!l){for(let i=0;i<r.length;i+=1)b(e[i]);l=!0}},o(u){for(let i=0;i<e.length;i+=1)y(e[i]);l=!1},d(u){u&&T(s);for(let i=0;i<e.length;i+=1)e[i].d(u)}}}function je(t,e){let n,s,l;return s=new Ht({props:{task:e[5]}}),{key:t,first:null,c(){n=ie(),B(s.$$.fragment),this.first=n},m(r,o){P(r,n,o),E(s,r,o),l=!0},p(r,o){e=r;const u={};o&1&&(u.task=e[5]),s.$set(u)},i(r){l||(b(s.$$.fragment,r),l=!0)},o(r){y(s.$$.fragment,r),l=!1},d(r){r&&T(n),N(s,r)}}}function zt(t){let e,n,s,l=!!t[1]&&t[0].length&&Ne(t),r=t[2]&&Fe(t);return{c(){e=k("div"),l&&l.c(),n=I(),r&&r.c(),_(e,"class","task-list")},m(o,u){P(o,e,u),l&&l.m(e,null),h(e,n),r&&r.m(e,null),s=!0},p(o,[u]){o[1]&&o[0].length?l?(l.p(o,u),u&3&&b(l,1)):(l=Ne(o),l.c(),b(l,1),l.m(e,n)):l&&(X(),y(l,1,1,()=>{l=null}),z()),o[2]?r?(r.p(o,u),u&4&&b(r,1)):(r=Fe(o),r.c(),b(r,1),r.m(e,null)):r&&(X(),y(r,1,1,()=>{r=null}),z())},i(o){s||(b(l),b(r),s=!0)},o(o){y(l),y(r),s=!1},d(o){o&&T(e),l&&l.d(),r&&r.d()}}}function Jt(t,e,n){let{taskList:s}=e,{category:l=void 0}=e,r=!0;const o=[{name:"deleteAll",displayText:"Delete tasks",onClick:()=>s.forEach(i=>C.deleteTask(i.id)),icon:"X"}],u=()=>n(2,r=!r);return t.$$set=i=>{"taskList"in i&&n(0,s=i.taskList),"category"in i&&n(1,l=i.category)},[s,l,r,o,u]}class Be extends q{constructor(e){super(),R(this,e,Jt,zt,K,{taskList:0,category:1})}}function We(t,e,n){const s=t.slice();return s[5]=e[n],s}function Ke(t){let e,n,s,l=t[1].title+"",r,o,u,i,a,c,d,p,f,m,S,v,g,A,D,j,V,Z,$=t[1].tags.length>=0&&Re(t);return{c(){e=k("div"),n=k("div"),s=k("span"),r=F(l),o=I(),u=k("hr"),i=I(),a=k("span"),$&&$.c(),c=I(),d=k("input"),p=I(),f=k("hr"),m=I(),S=k("span"),v=k("input"),A=I(),D=k("hr"),_(s,"id","side-panel-title"),_(d,"type","text"),_(d,"placeholder","Add tags"),_(a,"id","side-panel-tags"),_(v,"type","text"),_(v,"placeholder","Add a description"),v.value=g=t[1].description?t[1].description:null,_(S,"id","side-panel-description"),_(n,"id","side-panel-container"),_(e,"id","task-side-pane")},m(w,L){P(w,e,L),h(e,n),h(n,s),h(s,r),h(n,o),h(n,u),h(n,i),h(n,a),$&&$.m(a,null),h(a,c),h(a,d),h(n,p),h(n,f),h(n,m),h(n,S),h(S,v),h(n,A),h(n,D),j=!0,V||(Z=[M(d,"change",t[3]),M(v,"change",t[4])],V=!0)},p(w,L){(!j||L&2)&&l!==(l=w[1].title+"")&&H(r,l),w[1].tags.length>=0?$?($.p(w,L),L&2&&b($,1)):($=Re(w),$.c(),b($,1),$.m(a,c)):$&&(X(),y($,1,1,()=>{$=null}),z()),(!j||L&2&&g!==(g=w[1].description?w[1].description:null)&&v.value!==g)&&(v.value=g)},i(w){j||(b($),j=!0)},o(w){y($),j=!1},d(w){w&&T(e),$&&$.d(),V=!1,W(Z)}}}function Re(t){let e,n,s=J(t[1].tags),l=[];for(let o=0;o<s.length;o+=1)l[o]=qe(We(t,s,o));const r=o=>y(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=ie()},m(o,u){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(o,u);P(o,e,u),n=!0},p(o,u){if(u&2){s=J(o[1].tags);let i;for(i=0;i<s.length;i+=1){const a=We(o,s,i);l[i]?(l[i].p(a,u),b(l[i],1)):(l[i]=qe(a),l[i].c(),b(l[i],1),l[i].m(e.parentNode,e))}for(X(),i=s.length;i<l.length;i+=1)r(i);z()}},i(o){if(!n){for(let u=0;u<s.length;u+=1)b(l[u]);n=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)y(l[u]);n=!1},d(o){o&&T(e),ke(l,o)}}}function qe(t){let e,n;return e=new Ve({props:{value:t[5]}}),{c(){B(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,l){const r={};l&2&&(r.value=s[5]),e.$set(r)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Yt(t){let e,n,s=t[0].isOpen&&t[1]!=null&&Ke(t);return{c(){s&&s.c(),e=ie()},m(l,r){s&&s.m(l,r),P(l,e,r),n=!0},p(l,[r]){l[0].isOpen&&l[1]!=null?s?(s.p(l,r),r&3&&b(s,1)):(s=Ke(l),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(X(),y(s,1,1,()=>{s=null}),z())},i(l){n||(b(s),n=!0)},o(l){y(s),n=!1},d(l){l&&T(e),s&&s.d(l)}}}function Vt(t,e,n){let s,l,r;ee(t,se,i=>n(0,l=i)),ee(t,C,i=>n(2,r=i));const o=i=>s!=null&&C.updateTask(s.id,a=>{let c={...a,tags:[...a.tags,...i.currentTarget.value.split(" ")]};return i.currentTarget.value="",c}),u=i=>s!=null&&C.updateTask(s.id,a=>({...a,description:i.currentTarget.value}));return t.$$.update=()=>{t.$$.dirty&5&&n(1,s=l.selectedTaskId!=null?r[l.selectedTaskId]:null)},[l,s,r,o,u]}class Zt extends q{constructor(e){super(),R(this,e,Vt,Yt,K,{})}}function Gt(t){let e,n,s,l,r,o,u,i,a,c,d,p;return n=new bt({}),l=new Ft({}),o=new Be({props:{category:"In-Progress",taskList:t[1]}}),i=new Be({props:{category:"Finished",taskList:t[2]}}),d=new Zt({}),{c(){e=k("div"),B(n.$$.fragment),s=I(),B(l.$$.fragment),r=I(),B(o.$$.fragment),u=I(),B(i.$$.fragment),c=I(),B(d.$$.fragment),_(e,"id","main-panel"),_(e,"style",a=`width: ${t[0].isOpen?"55%":"95%"}`)},m(f,m){P(f,e,m),E(n,e,null),h(e,s),E(l,e,null),h(e,r),E(o,e,null),h(e,u),E(i,e,null),P(f,c,m),E(d,f,m),p=!0},p(f,m){const S={};m&2&&(S.taskList=f[1]),o.$set(S);const v={};m&4&&(v.taskList=f[2]),i.$set(v),(!p||m&1&&a!==(a=`width: ${f[0].isOpen?"55%":"95%"}`))&&_(e,"style",a)},i(f){p||(b(n.$$.fragment,f),b(l.$$.fragment,f),b(o.$$.fragment,f),b(i.$$.fragment,f),b(d.$$.fragment,f),p=!0)},o(f){y(n.$$.fragment,f),y(l.$$.fragment,f),y(o.$$.fragment,f),y(i.$$.fragment,f),y(d.$$.fragment,f),p=!1},d(f){f&&(T(e),T(c)),N(n),N(l),N(o),N(i),N(d,f)}}}function Qt(t){let e,n;return e=new gt({props:{$$slots:{default:[Gt]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,l){E(e,s,l),n=!0},p(s,[l]){const r={};l&15&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function xt(t,e,n){let s,l,r;return ee(t,se,o=>n(0,s=o)),ee(t,St,o=>n(1,l=o)),ee(t,It,o=>n(2,r=o)),[s,l,r]}class en extends q{constructor(e){super(),R(this,e,xt,Qt,K,{})}}new en({target:document.body});
